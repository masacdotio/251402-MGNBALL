var __runInitializers=this&&this.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=this&&this.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};import{MouseMode}from"./TcHmiLineChart.esm.js";import{Control as TcHmiToggleButton}from"../TcHmiToggleButton/TcHmiToggleButton.esm.js";let Menubar=(()=>{var _a,_b;let ___onPressed_decorators,___onIsActiveChanged_decorators,_instanceExtraInitializers=[];return class{static{const _metadata="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;___onPressed_decorators=[(_a=TcHmi).CallbackMethod.bind(_a)],___onIsActiveChanged_decorators=[(_b=TcHmi).CallbackMethod.bind(_b)],__esDecorate(this,null,___onPressed_decorators,{kind:"method",name:"__onPressed",static:!1,private:!1,access:{has:obj=>"__onPressed"in obj,get:obj=>obj.__onPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onIsActiveChanged_decorators,{kind:"method",name:"__onIsActiveChanged",static:!1,private:!1,access:{has:obj=>"__onIsActiveChanged"in obj,get:obj=>obj.__onIsActiveChanged},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}constructor(lineChart){this.__lineChart=lineChart;const localePrefix="Control::TcHmi.Controls.Beckhoff.TcHmiLineChart::";this.__menubar=$("<div></div>");let playButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",`${this.__lineChart.getId()}_playButton`,{"data-tchmi-tooltip":"%l%"+localePrefix+"Button_Tooltip_Play%/l%"},this.__lineChart);if(void 0===playButton)throw new Error("Needed Button could not be instantiated");playButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiLineChart-template-play","tchmi-line-chart-template-play"),this.__menubar[0].appendChild(playButton.getElement()[0]),this.__destroyEvents.PlayButtonPressed=TcHmi.EventProvider.register(this.__lineChart.getId()+"_playButton.onPressed",this.__onPressed);let pauseButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",`${this.__lineChart.getId()}_pauseButton`,{"data-tchmi-tooltip":"%l%"+localePrefix+"Button_Tooltip_Pause%/l%"},this.__lineChart);if(void 0===pauseButton)throw new Error("Needed Button could not be instantiated");pauseButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiLineChart-template-pause","tchmi-line-chart-template-pause"),this.__menubar[0].appendChild(pauseButton.getElement()[0]),this.__destroyEvents.PauseButtonPressed=TcHmi.EventProvider.register(this.__lineChart.getId()+"_pauseButton.onPressed",this.__onPressed);let panxButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",`${this.__lineChart.getId()}_panxButton`,{"data-tchmi-tooltip":"%l%"+localePrefix+"Button_Tooltip_PanX%/l%","data-tchmi-toggle-group":`${this.__lineChart.getId()}.interactions`},this.__lineChart);if(void 0===panxButton)throw new Error("Needed ToggleButton could not be instantiated");panxButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiLineChart-template-panx","tchmi-line-chart-template-panx"),this.__menubar[0].appendChild(panxButton.getElement()[0]),this.__destroyEvents.PanXToggleButtonStateChanged=TcHmi.EventProvider.register(this.__lineChart.getId()+"_panxButton.onStateChanged",this.__onIsActiveChanged);let panxyButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",`${this.__lineChart.getId()}_panxyButton`,{"data-tchmi-tooltip":"%l%"+localePrefix+"Button_Tooltip_PanXY%/l%","data-tchmi-toggle-group":`${this.__lineChart.getId()}.interactions`},this.__lineChart);if(void 0===panxyButton)throw new Error("Needed ToggleButton could not be instantiated");panxyButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiLineChart-template-panxy","tchmi-line-chart-template-panxy"),this.__menubar[0].appendChild(panxyButton.getElement()[0]),this.__destroyEvents.PanXYToggleButtonStateChanged=TcHmi.EventProvider.register(this.__lineChart.getId()+"_panxyButton.onStateChanged",this.__onIsActiveChanged);let zoomxButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",`${this.__lineChart.getId()}_zoomxButton`,{"data-tchmi-tooltip":"%l%"+localePrefix+"Button_Tooltip_ZoomX%/l%","data-tchmi-toggle-group":`${this.__lineChart.getId()}.interactions`},this.__lineChart);if(void 0===zoomxButton)throw new Error("Needed ToggleButton could not be instantiated");zoomxButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiLineChart-template-zoomx","tchmi-line-chart-template-zoomx"),this.__menubar[0].appendChild(zoomxButton.getElement()[0]),this.__destroyEvents.ZoomXToggleButtonStateChanged=TcHmi.EventProvider.register(this.__lineChart.getId()+"_zoomxButton.onStateChanged",this.__onIsActiveChanged);let zoomxyButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",`${this.__lineChart.getId()}_zoomxyButton`,{"data-tchmi-tooltip":"%l%"+localePrefix+"Button_Tooltip_ZoomXY%/l%","data-tchmi-toggle-group":`${this.__lineChart.getId()}.interactions`},this.__lineChart);if(void 0===zoomxyButton)throw new Error("Needed ToggleButton could not be instantiated");zoomxyButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiLineChart-template-zoomxy","tchmi-line-chart-template-zoomxy"),this.__menubar[0].appendChild(zoomxyButton.getElement()[0]),this.__destroyEvents.ZoomXYToggleButtonStateChanged=TcHmi.EventProvider.register(this.__lineChart.getId()+"_zoomxyButton.onStateChanged",this.__onIsActiveChanged);let resetZoomButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",`${this.__lineChart.getId()}_resetZoomButton`,{"data-tchmi-tooltip":"%l%"+localePrefix+"Button_Tooltip_ResetZoomPan%/l%"},this.__lineChart);if(void 0===resetZoomButton)throw new Error("Needed Button could not be instantiated");resetZoomButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiLineChart-template-reset-zoom","tchmi-line-chart-template-reset-zoom"),this.__menubar[0].appendChild(resetZoomButton.getElement()[0]),this.__destroyEvents.ResetZoomButtonPressed=TcHmi.EventProvider.register(this.__lineChart.getId()+"_resetZoomButton.onPressed",this.__onPressed);let optionsButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",`${this.__lineChart.getId()}_optionsButton`,{"data-tchmi-visibility":"Collapsed"},this.__lineChart);if(void 0===optionsButton)throw new Error("Needed Button could not be instantiated");optionsButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiLineChart-template-options","tchmi-line-chart-template-options"),this.__menubar[0].appendChild(optionsButton.getElement()[0]),this.__destroyEvents.OptionsButtonPressed=TcHmi.EventProvider.register(this.__lineChart.getId()+"_optionsButton.onPressed",this.__onPressed),this.__elementMenuBarDropdown=$('<div class="TcHmi_Controls_Beckhoff_TcHmiLineChart-template-menu-bar-dropdown tchmi-box"></div>'),this.__menuBarControls={playButton,pauseButton,panXToggleButton:panxButton,panXYToggleButton:panxyButton,zoomXToggleButton:zoomxButton,zoomXYToggleButton:zoomxyButton,resetZoomButton,optionsButton};let searchId=`${this.__lineChart.getId()}_panxButton`,mouseMode=this.__lineChart.getMouseMode();MouseMode[mouseMode||MouseMode.None]===MouseMode.PanXY?searchId=`${this.__lineChart.getId()}_panxyButton`:MouseMode[mouseMode||MouseMode.None]===MouseMode.ZoomX?searchId=`${this.__lineChart.getId()}_zoomxButton`:MouseMode[mouseMode||MouseMode.None]===MouseMode.ZoomXY&&(searchId=`${this.__lineChart.getId()}_zoomxyButton`);for(const control of Object.values(this.__menuBarControls))control instanceof TcHmiToggleButton&&(control.setToggleGroup(`${this.__lineChart.getId()}.interactions`),control.getId()===searchId&&control.setToggleState("Active"))}__lineChart=__runInitializers(this,_instanceExtraInitializers);__elementMenuBarDropdown;__menuBarControls=null;__menubar;__destroyEvents={};destroy(){for(const destroyEvent of Object.values(this.__destroyEvents))destroyEvent?.();this.__destroyEvents={}}__onPressed(event){null!==this.__elementMenuBarDropdown[0].parentElement&&this.showOptions(),event.name.includes("resetZoom")?this.__lineChart.resetZoom():event.name.includes("play")?this.__lineChart.play():event.name.includes("pause")?this.__lineChart.pause():event.name.includes("options")&&this.showOptions()}__onIsActiveChanged(_event){let isMouseModeActive=!1;"Active"===this.__menuBarControls?.panXToggleButton.getToggleState()?(this.__lineChart.setMouseMode(MouseMode.PanX),isMouseModeActive=!0):"Active"===this.__menuBarControls?.panXYToggleButton.getToggleState()?(this.__lineChart.setMouseMode(MouseMode.PanXY),isMouseModeActive=!0):"Active"===this.__menuBarControls?.zoomXToggleButton.getToggleState()?(this.__lineChart.setMouseMode(MouseMode.ZoomX),isMouseModeActive=!0):"Active"===this.__menuBarControls?.zoomXYToggleButton.getToggleState()&&(this.__lineChart.setMouseMode(MouseMode.ZoomXY),isMouseModeActive=!0),null!==this.__elementMenuBarDropdown[0].parentElement&&this.showOptions(),isMouseModeActive||this.__menuBarControls&&(this.__menuBarControls.panXToggleButton.setToggleState("Active"),null!==this.__elementMenuBarDropdown[0].parentElement&&this.showOptions())}showOptions(){null===this.__elementMenuBarDropdown[0].parentElement?TcHmi.TopMostLayer.add(this.__lineChart,this.__elementMenuBarDropdown,{centerHorizontal:!0,centerVertical:!0}):TcHmi.TopMostLayer.remove(this.__lineChart,this.__elementMenuBarDropdown)}calcMenuButtons(){if(!this.__menuBarControls)return;const menubarControlLength=Object.keys(this.__menuBarControls).length;this.__elementMenuBarDropdown.children().detach();for(const control of Object.values(this.__menuBarControls))this.__lineChart.getMenuBarElement()[0].contains(control.getElement()[0])||this.__lineChart.getMenuBarElement().children().first()[0].insertBefore(control.getElement()[0],this.__lineChart.getMenuBarElement().children().children().last()[0]);let menuBarWidth=this.__lineChart.getMenuBarElement().width(),summatedButtonSizes=this.__lineChart.getMenuBarElement().children().children().last().width()||0,elementsInTopMostLayer=0;for(let i=0,ii=menubarControlLength-1;i<ii;i++){const elem=this.__lineChart.getMenuBarElement().children().children()[i-elementsInTopMostLayer];if(!elem.id.includes("options")){summatedButtonSizes+=$(elem).outerWidth(!0),summatedButtonSizes>=menuBarWidth&&(this.__elementMenuBarDropdown[0].appendChild(elem),elementsInTopMostLayer++)}}this.__elementMenuBarDropdown[0].childElementCount>0?this.__menuBarControls.optionsButton.setVisibility("Visible"):this.__menuBarControls.optionsButton.setVisibility("Collapsed")}getMenubar(){return this.__menubar}setActiveToggleButton(mouseMode){mouseMode===MouseMode.PanX&&this.__menubar?this.__menuBarControls?.panXToggleButton.setToggleState("Active"):mouseMode===MouseMode.PanXY&&this.__menubar?this.__menuBarControls?.panXYToggleButton.setToggleState("Active"):mouseMode===MouseMode.ZoomX&&this.__menubar?this.__menuBarControls?.zoomXToggleButton.setToggleState("Active"):mouseMode===MouseMode.ZoomXY&&this.__menubar&&this.__menuBarControls?.zoomXYToggleButton.setToggleState("Active")}setMenubarButtonsEnabled(enableMenubarControls){this.__menuBarControls?.playButton.setIsEnabled(enableMenubarControls.playButtonEnable),this.__menuBarControls?.pauseButton.setIsEnabled(enableMenubarControls.pauseButtonEnable),this.__menuBarControls?.panXToggleButton.setIsEnabled(enableMenubarControls.panXToggleButtonEnable),this.__menuBarControls?.panXYToggleButton.setIsEnabled(enableMenubarControls.panXYToggleButtonEnable),this.__menuBarControls?.zoomXToggleButton.setIsEnabled(enableMenubarControls.zoomXToggleButtonEnable),this.__menuBarControls?.zoomXYToggleButton.setIsEnabled(enableMenubarControls.zoomXYToggleButtonEnable),this.__menuBarControls?.resetZoomButton.setIsEnabled(enableMenubarControls.resetZoomButtonEnable)}}})();export{Menubar};