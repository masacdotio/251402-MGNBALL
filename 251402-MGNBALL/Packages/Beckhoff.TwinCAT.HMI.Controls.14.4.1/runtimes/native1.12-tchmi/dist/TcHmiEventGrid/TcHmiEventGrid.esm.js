var __runInitializers=this&&this.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=this&&this.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};import{TcHmiControl}from"Beckhoff.TwinCAT.HMI.Framework/index.esm.js";import{ColumnsPopup}from"./ColumnsPopup.js";import{DetailsPopup}from"./DetailsPopup.js";import{ConfirmAllPopup}from"./ConfirmAllPopup.js";import{FilterPrompt}from"../Helpers/TcHmiPopups/FilterPrompt.js";let TcHmiEventGrid=(()=>{var _a,_b;let ___onResized_decorators,___onThemeDataChanged_decorators,___onSelectedItemChanged_decorators,___onDataGridPropertyChanged_decorators,___onFilterPressed_decorators,___onColumnsPressed_decorators,___onExportPressed_decorators,___onConfirmPressed_decorators,___onConfirmAllPressed_decorators,___onDoubleclick_decorators,___onTouchStart_decorators,___onScroll_decorators,___onResolverForColumnsWatchCallback_decorators,___onResolverForFilterWatchCallback_decorators,_classSuper=TcHmiControl.Control,_instanceExtraInitializers=[];return class TcHmiEventGrid extends _classSuper{static{const _metadata="function"==typeof Symbol&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;___onResized_decorators=[TcHmi.EventHandler()],___onThemeDataChanged_decorators=[TcHmi.EventHandler()],___onSelectedItemChanged_decorators=[TcHmi.EventHandler()],___onDataGridPropertyChanged_decorators=[TcHmi.EventHandler()],___onFilterPressed_decorators=[TcHmi.EventHandler({checkAccess:"configure"})],___onColumnsPressed_decorators=[TcHmi.EventHandler()],___onExportPressed_decorators=[TcHmi.EventHandler()],___onConfirmPressed_decorators=[TcHmi.EventHandler()],___onConfirmAllPressed_decorators=[TcHmi.EventHandler()],___onDoubleclick_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:["operate","viewDetails"]})],___onTouchStart_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:["operate","viewDetails"]})],___onScroll_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:["operate","viewDetails"]})],___onResolverForColumnsWatchCallback_decorators=[(_a=TcHmi).CallbackMethod.bind(_a)],___onResolverForFilterWatchCallback_decorators=[(_b=TcHmi).CallbackMethod.bind(_b)],__esDecorate(this,null,___onResized_decorators,{kind:"method",name:"__onResized",static:!1,private:!1,access:{has:obj=>"__onResized"in obj,get:obj=>obj.__onResized},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onThemeDataChanged_decorators,{kind:"method",name:"__onThemeDataChanged",static:!1,private:!1,access:{has:obj=>"__onThemeDataChanged"in obj,get:obj=>obj.__onThemeDataChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onSelectedItemChanged_decorators,{kind:"method",name:"__onSelectedItemChanged",static:!1,private:!1,access:{has:obj=>"__onSelectedItemChanged"in obj,get:obj=>obj.__onSelectedItemChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onDataGridPropertyChanged_decorators,{kind:"method",name:"__onDataGridPropertyChanged",static:!1,private:!1,access:{has:obj=>"__onDataGridPropertyChanged"in obj,get:obj=>obj.__onDataGridPropertyChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onFilterPressed_decorators,{kind:"method",name:"__onFilterPressed",static:!1,private:!1,access:{has:obj=>"__onFilterPressed"in obj,get:obj=>obj.__onFilterPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onColumnsPressed_decorators,{kind:"method",name:"__onColumnsPressed",static:!1,private:!1,access:{has:obj=>"__onColumnsPressed"in obj,get:obj=>obj.__onColumnsPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onExportPressed_decorators,{kind:"method",name:"__onExportPressed",static:!1,private:!1,access:{has:obj=>"__onExportPressed"in obj,get:obj=>obj.__onExportPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onConfirmPressed_decorators,{kind:"method",name:"__onConfirmPressed",static:!1,private:!1,access:{has:obj=>"__onConfirmPressed"in obj,get:obj=>obj.__onConfirmPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onConfirmAllPressed_decorators,{kind:"method",name:"__onConfirmAllPressed",static:!1,private:!1,access:{has:obj=>"__onConfirmAllPressed"in obj,get:obj=>obj.__onConfirmAllPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onDoubleclick_decorators,{kind:"method",name:"__onDoubleclick",static:!1,private:!1,access:{has:obj=>"__onDoubleclick"in obj,get:obj=>obj.__onDoubleclick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onTouchStart_decorators,{kind:"method",name:"__onTouchStart",static:!1,private:!1,access:{has:obj=>"__onTouchStart"in obj,get:obj=>obj.__onTouchStart},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onScroll_decorators,{kind:"method",name:"__onScroll",static:!1,private:!1,access:{has:obj=>"__onScroll"in obj,get:obj=>obj.__onScroll},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResolverForColumnsWatchCallback_decorators,{kind:"method",name:"__onResolverForColumnsWatchCallback",static:!1,private:!1,access:{has:obj=>"__onResolverForColumnsWatchCallback"in obj,get:obj=>obj.__onResolverForColumnsWatchCallback},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResolverForFilterWatchCallback_decorators,{kind:"method",name:"__onResolverForFilterWatchCallback",static:!1,private:!1,access:{has:obj=>"__onResolverForFilterWatchCallback"in obj,get:obj=>obj.__onResolverForFilterWatchCallback},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static#tchmiFQN="TcHmi.Controls.Beckhoff."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__elementTemplateRoot=__runInitializers(this,_instanceExtraInitializers);__elementGridContainer;__elementMenuBar;__elementTypeToggles;__elementSeverityToggles;__elementOptions;__elementMessageActions;__elementFilterPopup;__elementColumnsPopup;__elementDetailsPopup;__elementConfirmAllPopup;__filter;__internalFilter=[];__noPayloadsFilter=new TcHmi.FilterInstance("type","!=",TcHmi.Server.Events.Type.Payload);__serverInterval;__columns;__internalColumns=[];__allowDetailsPopup;__showMenuBar;__menuBarPosition;__buttonFontFamily;__buttonFontSize;__buttonFontSizeUnit;__buttonFontStyle;__buttonFontWeight;__buttonHeight;__storage;__datagrid;__sortingInitialized=!1;__headerFontFamilyInitialized=!1;__headerFontSizeInitialized=!1;__headerFontSizeUnitInitialized=!1;__headerFontStyleInitialized=!1;__headerFontWeightInitialized=!1;__gridFontFamilyInitialized=!1;__gridFontSizeInitialized=!1;__gridFontSizeUnitInitialized=!1;__gridFontStyleInitialized=!1;__gridFontWeightInitialized=!1;__headerHeightInitialized=!1;__headerHeightUnitInitialized=!1;__rowHeightInitialized=!1;__ignoreEscapeSequences;__typeToggles=new Map([[TcHmi.Server.Events.Type.Alarm,void 0],[TcHmi.Server.Events.Type.Message,void 0]]);__severityToggles=new Map([[TcHmi.Server.Events.Severity.Verbose,void 0],[TcHmi.Server.Events.Severity.Info,void 0],[TcHmi.Server.Events.Severity.Warning,void 0],[TcHmi.Server.Events.Severity.Error,void 0],[TcHmi.Server.Events.Severity.Critical,void 0]]);__menuBarButtons=new Map([["filter",void 0],["columns",void 0],["export",void 0],["confirm",void 0],["confirmAll",void 0]]);__buttonTooltips={message:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Message%/l%",alarm:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Alarm%/l%",verbose:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Verbose%/l%",info:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Info%/l%",warning:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Warning%/l%",error:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Error%/l%",critical:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Critical%/l%",filter:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Filter%/l%",columns:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Columns%/l%",export:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Export%/l%",confirm:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_Confirm%/l%",confirmAll:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Button_Tooltip_ConfirmAll%/l%"};__canConfirm=!0;__filterPrompt=null;__columnsPopup=null;__detailsPopup=null;__confirmAllPopup=null;__typesToShow=new Map([[TcHmi.Server.Events.Type.Alarm,!0],[TcHmi.Server.Events.Type.Message,!0]]);__severitiesToShow=new Map([[TcHmi.Server.Events.Severity.Verbose,!0],[TcHmi.Server.Events.Severity.Info,!0],[TcHmi.Server.Events.Severity.Warning,!0],[TcHmi.Server.Events.Severity.Error,!0],[TcHmi.Server.Events.Severity.Critical,!0]]);__themedIcons={types:new Map,severities:new Map};__localizedElements=new Map;__localizationReader=void 0;__subscriptionId=null;__availableColumns={severity:{name:"severity",label:"",control:"Image",width:30,widthUnit:"px",resize:!1,minWidth:30,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center",dataDefinitions:[{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Label_Text_Verbose%/l%",value:TcHmi.Server.Events.Severity.Verbose,height:30,width:30,source:TcHmi.Controls.getBasePathEx(this)+"/Themes/Base/Images/verbose.svg"},{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Label_Text_Info%/l%",value:TcHmi.Server.Events.Severity.Info,height:30,width:30,source:TcHmi.Controls.getBasePathEx(this)+"/Themes/Base/Images/info.svg"},{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Label_Text_Warning%/l%",value:TcHmi.Server.Events.Severity.Warning,height:30,width:30,source:TcHmi.Controls.getBasePathEx(this)+"/Themes/Base/Images/warning.svg"},{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Label_Text_Error%/l%",value:TcHmi.Server.Events.Severity.Error,height:30,width:30,source:TcHmi.Controls.getBasePathEx(this)+"/Themes/Base/Images/error.svg"},{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Label_Text_Critical%/l%",value:TcHmi.Server.Events.Severity.Critical,height:30,width:30,source:TcHmi.Controls.getBasePathEx(this)+"/Themes/Base/Images/critical.svg"}]},type:{name:"type",label:"",control:"Image",width:30,widthUnit:"px",resize:!1,minWidth:30,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center",dataDefinitions:[{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Label_Text_Message%/l%",value:TcHmi.Server.Events.Type.Message,height:30,width:30,source:TcHmi.Controls.getBasePathEx(this)+"/Themes/Base/Images/message.svg"},{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Label_Text_Alarm%/l%",value:TcHmi.Server.Events.Type.Alarm,height:30,width:30,source:TcHmi.Controls.getBasePathEx(this)+"/Themes/Base/Images/alarm.svg"}]},domain:{name:"domain",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_Domain%/l%",control:"TextBlock",width:150,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Left",verticalAlignment:"Center"},sourceDomain:{name:"sourceDomain",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_SourceDomain%/l%",control:"TextBlock",width:150,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Left",verticalAlignment:"Center"},name:{name:"name",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_Name%/l%",control:"TextBlock",width:200,widthUnit:"px",resize:!0,minWidth:100,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Left",verticalAlignment:"Center"},text:{name:"text",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_Text%/l%",control:"TextBlock",width:373,widthUnit:"px",resize:!0,minWidth:100,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Left",verticalAlignment:"Center"},alarmState:{name:"alarmState",label:"",control:"TextBlock",width:30,widthUnit:"px",resize:!1,minWidth:30,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},confirmationState:{name:"confirmationState",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_ConfirmationState%/l%",control:"TextBlock",format:{objectType:"Function",fn:"EnumToString",fnParams:[{objectType:"StaticValue",valueType:"tchmi:framework#/definitions/EnumMapping",value:{0:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Enum_ConfirmationState_NotSupported%/l%",1:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Enum_ConfirmationState_NotRequired%/l%",2:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Enum_ConfirmationState_Wait%/l%",3:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Enum_ConfirmationState_Confirmed%/l%",4:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Enum_ConfirmationState_Reset%/l%"}}]},width:150,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Left",verticalAlignment:"Center"},timeAndDateRaised:{name:"timeRaised",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_Raised%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToDateTimeString",fnParams:[]},width:150,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},timeRaised:{name:"timeRaised",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_TimeRaised%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToTimeString",fnParams:[]},width:100,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},dateRaised:{name:"timeRaised",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_DateRaised%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToDateString",fnParams:[]},width:100,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},timeAndDateConfirmed:{name:"timeConfirmed",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_Confirmed%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToDateTimeString",fnParams:[]},width:150,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},timeConfirmed:{name:"timeConfirmed",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_TimeConfirmed%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToTimeString",fnParams:[]},width:100,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},dateConfirmed:{name:"timeConfirmed",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_DateConfirmed%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToDateString",fnParams:[]},width:100,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},timeAndDateCleared:{name:"timeCleared",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_Cleared%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToDateTimeString",fnParams:[]},width:150,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},timeCleared:{name:"timeCleared",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_TimeCleared%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToTimeString",fnParams:[]},width:100,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"},dateCleared:{name:"timeCleared",label:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiEventGrid::Column_Header_DateCleared%/l%",control:"TextBlock",format:{objectType:"Function",fn:"ToDateString",fnParams:[]},width:100,widthUnit:"px",resize:!0,minWidth:70,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Center",verticalAlignment:"Center"}};__doubletapStartTime=0;__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-event-grid-template")),this.__elementGridContainer=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-grid-container"),0===this.__elementGridContainer.length&&(this.__elementGridContainer=this.__elementTemplateRoot.find(".tchmi-event-grid-template-grid-container")),this.__elementMenuBar=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-menu-bar"),0===this.__elementMenuBar.length&&(this.__elementMenuBar=this.__elementTemplateRoot.find(".tchmi-event-grid-template-menu-bar")),this.__elementTypeToggles=this.__elementMenuBar.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-type-toggles"),0===this.__elementTypeToggles.length&&(this.__elementTypeToggles=this.__elementMenuBar.find(".tchmi-event-grid-template-type-toggles")),this.__elementSeverityToggles=this.__elementMenuBar.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-severity-toggles"),0===this.__elementSeverityToggles.length&&(this.__elementSeverityToggles=this.__elementMenuBar.find(".tchmi-event-grid-template-severity-toggles")),this.__elementOptions=this.__elementMenuBar.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-options"),0===this.__elementOptions.length&&(this.__elementOptions=this.__elementMenuBar.find(".tchmi-event-grid-template-options")),this.__elementMessageActions=this.__elementMenuBar.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-event-actions"),0===this.__elementMessageActions.length&&(this.__elementMessageActions=this.__elementMenuBar.find(".tchmi-event-grid-template-event-actions")),this.__elementFilterPopup=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-filter-popup"),0===this.__elementFilterPopup.length&&(this.__elementFilterPopup=this.__elementTemplateRoot.find(".tchmi-event-grid-template-filter-popup")),this.__elementColumnsPopup=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-columns-popup"),0===this.__elementColumnsPopup.length&&(this.__elementColumnsPopup=this.__elementTemplateRoot.find(".tchmi-event-grid-template-columns-popup")),this.__elementDetailsPopup=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-details-popup"),0===this.__elementDetailsPopup.length&&(this.__elementDetailsPopup=this.__elementTemplateRoot.find(".tchmi-event-grid-template-details-popup")),this.__elementConfirmAllPopup=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-confirm-all-popup"),0===this.__elementConfirmAllPopup.length&&(this.__elementConfirmAllPopup=this.__elementTemplateRoot.find(".tchmi-event-grid-template-confirm-all-popup")),0===this.__elementTemplateRoot.length||0===this.__elementGridContainer.length||0===this.__elementMenuBar.length||0===this.__elementTypeToggles.length||0===this.__elementSeverityToggles.length||0===this.__elementOptions.length||0===this.__elementMessageActions.length||0===this.__elementFilterPopup.length||0===this.__elementColumnsPopup.length||0===this.__elementDetailsPopup.length||0===this.__elementConfirmAllPopup.length)throw new Error("Invalid Template.html");let datagrid=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiDatagrid",`${this.__id}.eventDatagrid`,{"data-tchmi-width":100,"data-tchmi-width-unit":"%","data-tchmi-height":100,"data-tchmi-height-unit":"%","data-tchmi-row-classes-provider":{objectType:"Function",active:!0,fn:"EventClassesProvider",fnParams:[]},"data-tchmi-cell-content-padding":{left:3,right:3}},this);if(!datagrid)throw new Error("Could not create controls for TcHmiEventGrid.");datagrid.__setDataSymbolTransform(TcHmi.Server.Events.parseServerEvent),this.__datagrid=datagrid;let localizedElements=this.__element[0].querySelectorAll("[data-tchmi-localized-content-key]");for(let i=0,ii=localizedElements.length;i<ii;i++){let element=localizedElements[i],localizeKey=element.dataset.tchmiLocalizedContentKey;localizeKey&&this.__localizedElements.set(element,{key:localizeKey})}this.__destroyOnDestroy.push(this.__localization.watch(data=>{if(data.error===TcHmi.Errors.NONE&&data.reader){this.__localizationReader=data.reader;for(const[element,info]of this.__localizedElements){let localizedText=data.reader.get(info.key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}}),TcHmi.EventProvider.register(this.__datagrid.getId()+".onPropertyChanged",this.__onDataGridPropertyChanged)),super.__previnit()}__init(){super.__init(),this.__storage=new TcHmi.LocalStorage(this,{filter:this.getFilter(),columns:this.getColumns()}),this.__elementGridContainer.append(this.__datagrid.getElement());for(const type of this.__typeToggles.keys()){let buttonName=TcHmi.Server.Events.Type[type].toLowerCase(),button=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",`${this.__id}.${buttonName}ToggleButton`,{"data-tchmi-height":this.__buttonHeight??30,"data-tchmi-width-mode":"Content","data-tchmi-min-width":void 0!==this.__buttonHeight?2*this.__buttonHeight:60,"data-tchmi-text":"0","data-tchmi-text-horizontal-alignment":"Right","data-tchmi-text-padding":{left:this.__buttonHeight??30,top:0,right:7,bottom:0},"data-tchmi-toggle-state":"Active","data-tchmi-tooltip":this.__buttonTooltips[buttonName],"data-tchmi-text-font-family":this.__buttonFontFamily,"data-tchmi-text-font-size":this.__buttonFontSize,"data-tchmi-text-font-size-unit":this.__buttonFontSizeUnit,"data-tchmi-text-font-style":this.__buttonFontStyle,"data-tchmi-text-font-weight":this.__buttonFontWeight},this);if(!button)throw new Error("Could not create controls for TcHmiEventGrid.");let buttonElement=button.getElement();buttonElement.addClass(`TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-${buttonName.toLowerCase()}-toggle-button`),buttonElement.addClass(`tchmi-event-grid-template-${buttonName.toLowerCase()}-toggle-button`),this.__typeToggles.set(type,button),this.__elementTypeToggles.append(buttonElement)}for(const severity of this.__severityToggles.keys()){let buttonName=TcHmi.Server.Events.Severity[severity].toLowerCase(),button=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",`${this.__id}.${buttonName}ToggleButton`,{"data-tchmi-height":this.__buttonHeight??30,"data-tchmi-width-mode":"Content","data-tchmi-min-width":void 0!==this.__buttonHeight?2*this.__buttonHeight:60,"data-tchmi-text":"0","data-tchmi-text-horizontal-alignment":"Right","data-tchmi-text-padding":{left:this.__buttonHeight??30,top:0,right:7,bottom:0},"data-tchmi-toggle-state":"Active","data-tchmi-tooltip":this.__buttonTooltips[buttonName],"data-tchmi-text-font-family":this.__buttonFontFamily,"data-tchmi-text-font-size":this.__buttonFontSize,"data-tchmi-text-font-size-unit":this.__buttonFontSizeUnit,"data-tchmi-text-font-style":this.__buttonFontStyle,"data-tchmi-text-font-weight":this.__buttonFontWeight},this);if(!button)throw new Error("Could not create controls for TcHmiEventGrid.");let buttonElement=button.getElement();buttonElement.addClass(`TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-${buttonName.toLowerCase()}-toggle-button`),buttonElement.addClass(`tchmi-event-grid-template-${buttonName.toLowerCase()}-toggle-button`),this.__severityToggles.set(severity,button),this.__elementSeverityToggles.append(buttonElement)}for(const buttonName of this.__menuBarButtons.keys()){let button=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",`${this.__id}.${buttonName}Button`,{"data-tchmi-width":this.__buttonHeight??30,"data-tchmi-height":this.__buttonHeight??30,"data-tchmi-tooltip":this.__buttonTooltips[buttonName]},this);if(!button)throw new Error("Could not create controls for TcHmiEventGrid.");let buttonElement=button.getElement();buttonElement.addClass(`TcHmi_Controls_Beckhoff_TcHmiEventGrid-template-${buttonName.toLowerCase()}-button`),buttonElement.addClass(`tchmi-event-grid-template-${buttonName.toLowerCase()}-button`),this.__menuBarButtons.set(buttonName,button),"confirm"===buttonName||"confirmAll"===buttonName?(button.setIsEnabled(!1),this.__elementMessageActions.append(buttonElement)):this.__elementOptions.append(buttonElement)}let configureMapping=[{controlRight:"operate",virtualControlRight:"configure"}],filterButton=this.__menuBarButtons.get("filter");filterButton&&filterButton.setVirtualControlRightMappings(configureMapping);let columnsButton=this.__menuBarButtons.get("columns");columnsButton&&columnsButton.setVirtualControlRightMappings(configureMapping),this.__setCanConfirm(!1)}__attach(){super.__attach(),this.__destroyOnDetach.push(TcHmi.EventProvider.register(this.__id+".onResized",this.__onResized),TcHmi.EventProvider.register("onThemeDataChanged",this.__onThemeDataChanged));for(const[type,button]of this.__typeToggles)this.__destroyOnDetach.push(TcHmi.EventProvider.register(button.getId()+".onToggleStateChanged",this.__getTypeToggleStateChangedHandler(button,type)));for(const[severity,button]of this.__severityToggles)this.__destroyOnDetach.push(TcHmi.EventProvider.register(button.getId()+".onToggleStateChanged",this.__getSeverityToggleStateChangedHandler(button,severity)));this.__destroyOnDetach.push(TcHmi.EventProvider.register(this.__datagrid.getId()+".onPropertyChanged<selectedRowValue>",this.__onSelectedItemChanged),TcHmi.EventProvider.register(this.__menuBarButtons.get("filter").getId()+".onPressed",this.__onFilterPressed),TcHmi.EventProvider.register(this.__menuBarButtons.get("columns").getId()+".onPressed",this.__onColumnsPressed),TcHmi.EventProvider.register(this.__menuBarButtons.get("export").getId()+".onPressed",this.__onExportPressed),TcHmi.EventProvider.register(this.__menuBarButtons.get("confirm").getId()+".onPressed",this.__onConfirmPressed),TcHmi.EventProvider.register(this.__menuBarButtons.get("confirmAll").getId()+".onPressed",this.__onConfirmAllPressed),TcHmi.EventProvider.registerDomEvent(this.__elementGridContainer,"dblclick",this.__onDoubleclick),TcHmi.EventProvider.registerDomEvent(this.__elementGridContainer,"touchstart",this.__onTouchStart,{passive:!1}),TcHmi.EventProvider.registerDomEvent(this.__elementGridContainer,"scroll",this.__onScroll)),this.__themedIcons=this.__getThemedIcons();let filter=this.__storage?.get("filter");filter?this.__updateFilter(filter):this.__processFilter();let columns=this.__storage?.get("columns");columns?this.__updateColumns(columns):this.__processColumns()}__detach(){super.__detach(),this.__updateSubscription(!0)}destroy(){this.__keepAlive||(super.destroy(),this.__filterPrompt&&(this.__filterPrompt.destroy(),this.__filterPrompt=null),this.__columnsPopup&&(this.__columnsPopup.destroy(),this.__columnsPopup=null),this.__detailsPopup&&(this.__detailsPopup.destroy(),this.__detailsPopup=null),this.__confirmAllPopup&&(this.__confirmAllPopup.destroy(),this.__confirmAllPopup=null))}__addLocalizedElement(element,key,...parameters){let info={key};if(0!==parameters.length&&(info.parameters=parameters),this.__localizedElements.set(element,info),this.__localizationReader){let localizedText=this.__localizationReader.get(key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}__removeLocalizedElement(element){this.__localizedElements.delete(element)}__onResized(){"Left"!==this.__menuBarPosition&&"Right"!==this.__menuBarPosition||this.__fixVerticalMenuBarWidth()}__onThemeDataChanged(){this.__themedIcons=this.__getThemedIcons(),this.__updateColumns(this.__internalColumns)}__getTypeToggleStateChangedHandler(toggleButton,type){return()=>{this.__typesToShow.set(type,"Active"===toggleButton.getToggleState()),this.__updateDatagridFilter()}}__getSeverityToggleStateChangedHandler(toggleButton,severity){return()=>{this.__severitiesToShow.set(severity,"Active"===toggleButton.getToggleState()),this.__updateDatagridFilter()}}__onSelectedItemChanged(){this.__processSelectedItem(),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SelectedEvent"}),TcHmi.EventProvider.raise(this.__id+".onSelectedItemChanged",this.getSelectedEvent())}__onDataGridPropertyChanged(_event,data,...args){["Sorting","HeaderFontFamily","HeaderFontSize","HeaderFontSizeUnit","HeaderFontStyle","HeaderFontWeight","GridFontFamily","GridFontSize","GridFontSizeUnit","GridFontStyle","GridFontWeight","HeaderHeight","HeaderHeightUnit","RowHeight"].includes(data.propertyName)&&TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",data,...args)}__onFilterPressed(){this.__filterPrompt||(this.__filterPrompt=new FilterPrompt(TcHmi.Type.getSchema("tchmi:server#/definitions/eventFilter"),this.__internalFilter,this),this.__filterPrompt.setBackgroundAction({close:!0,action:"cancel"})),this.__filterPrompt.update(this.__internalFilter,!tchmi_equal(this.__internalFilter,this.__filter)||0===this.__internalFilter.length&&!this.__filter),this.__filterPrompt.prompt().then(newFilter=>{this.__updateFilter(newFilter),this.__storage?.setWithValidation("filter",this.__internalFilter)}),this.__filterPrompt.show()}__onColumnsPressed(){this.__columnsPopup||(this.__columnsPopup=new ColumnsPopup(this.__elementColumnsPopup[0],this),this.__columnsPopup.registerOkButtonHandler(()=>{TcHmi.Access.checkAccess(this,"configure")&&(this.__updateColumns(this.__columnsPopup.getSettings()),this.__storage?.setWithValidation("columns",this.__internalColumns))}),this.__columnsPopup.registerResetButtonHandler(()=>{this.__storage?.delete("columns"),this.__columnsPopup.requiresUpdate()&&this.__columnsPopup.update(this.__columns??[],!1)})),this.__columnsPopup.requiresUpdate()&&this.__columnsPopup.update(this.__internalColumns,!(tchmi_equal(this.__internalColumns,this.__columns)||0===this.__internalColumns.length&&!this.__columns)),this.__columnsPopup.show()}__onExportPressed(){this.__menuBarButtons.get("export")?.setIsEnabled(!1),TcHmi.Server.Events.exportEvents({filter:this.__internalFilter},data=>{data.error!==TcHmi.Errors.NONE&&TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,"Unable to export events with the given filter: ",this.__internalFilter,`, Error: ${TcHmi.Log.buildMessage(data.details)}`),this.__menuBarButtons.get("export")?.setIsEnabled(!0)})}__onConfirmPressed(){let event=this.__datagrid.getSelectedRowValue();TcHmi.Server.Events.isAlarm(event)&&TcHmi.Server.Events.confirmAlarm(event,data=>{data.error!==TcHmi.Errors.NONE&&TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,`Unable to confirm alarm with id ${event.id} in domain ${event.domain}. Error: ${TcHmi.Log.buildMessage(data.details)}`)})}__onConfirmAllPressed(){this.__confirmAllPopup||(this.__confirmAllPopup=new ConfirmAllPopup(this.__elementConfirmAllPopup[0],this));let commands=new Map;commands.set({commandOptions:["SendErrorMessage"],symbol:"ListEvents",filter:this.__getConfirmAllFilter()},(command,data)=>{command.readValue?this.__confirmAllPopup.update(command.readValue.map(TcHmi.Server.Events.parseServerEvent).filter(TcHmi.Server.Events.isAlarm)):TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Symbol:"ListEvents"},TcHmi.Log.buildMessage({code:TcHmi.Errors.E_SERVER_READVALUE_MISSING,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_READVALUE_MISSING],reason:'Missing property: "readValue" in command for symbol: "ListEvents" in response from server with id: '+data.response?.id,domain:this.__type}))}),TcHmi.Server.requestEx({requestType:"ReadWrite",commands:Array.from(commands.keys())},null,this.__getServerResponseHandler(commands)),this.__confirmAllPopup.update([]),this.__confirmAllPopup.show()}__onDoubleclick(event){if(!(event.target instanceof Element))return;let tableRow=event.target;for(;tableRow&&!tableRow.classList.contains("TcHmi_Controls_Beckhoff_TcHmiDatagrid-template-row")&&!tableRow.classList.contains("tchmi-datagrid-template-row");)tableRow=tableRow.parentElement;tableRow&&(TcHmi.EventProvider.raise(this.__id+".onItemDoubleClicked",this.getSelectedEvent()),this.__showDetails())}__onTouchStart(event){if(!(event.target instanceof Element))return;let tableRow=event.target;for(;tableRow&&(!tableRow.classList.contains("TcHmi_Controls_Beckhoff_TcHmiDatagrid-template-row")||!tableRow.classList.contains("tchmi-datagrid-template-row"));)tableRow=tableRow.parentElement;let now=Date.now();tableRow&&(now-this.__doubletapStartTime<300?(TcHmi.EventProvider.raise(this.__id+".onItemDoubleClicked",this.getSelectedEvent()),this.__showDetails(),this.__doubletapStartTime=0,event.preventDefault()):this.__doubletapStartTime=now)}__onScroll(event){this.__doubletapStartTime=0}__showDetails(){this.__allowDetailsPopup&&(this.__detailsPopup||(this.__detailsPopup=new DetailsPopup(this.__elementDetailsPopup[0],this)),this.__detailsPopup.update(this.__datagrid.getSelectedRowValue()),this.__detailsPopup.show())}__processSelectedItem(){let event=this.__datagrid.getSelectedRowValue();null===event?(this.__menuBarButtons.get("confirm").setIsEnabled(!1),this.__detailsPopup&&this.__detailsPopup.isShowing()&&this.__detailsPopup.hide()):(this.__menuBarButtons.get("confirm").setIsEnabled(TcHmi.Server.Events.isAlarm(event)&&event.confirmationState===TcHmi.Server.Events.ConfirmationState.WaitForConfirmation),this.__detailsPopup&&this.__detailsPopup.isShowing()&&this.__detailsPopup.update(event))}__updateSubscription(unsubscribeOnly=!1){if(TCHMI_DESIGNER)return;if(null!==this.__subscriptionId&&TcHmi.Server.unsubscribeEx(this.__subscriptionId,null,data=>{data.error!==TcHmi.Errors.NONE&&TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Symbol:"ListEvents"},TcHmi.Log.buildMessage(data.details))}),this.__subscriptionId=null,unsubscribeOnly||!this.__isAttached)return;let commands=this.__getToggleButtonCommands(),[confirmableCommand,confirmableHandler]=this.__getConfirmAllCommand();commands.set(confirmableCommand,confirmableHandler);let[canConfirmCommand,canConfirmHandler]=this.__getCanConfirmCommand();commands.set(canConfirmCommand,canConfirmHandler),commands.size>0&&(this.__subscriptionId=TcHmi.Server.subscribeEx(Array.from(commands.keys()),this.__serverInterval??TcHmi.Config.get().tcHmiServer.websocketIntervalTime??500,null,this.__getServerResponseHandler(commands)))}__getServerResponseHandler(commands){const propertiesToCheck=["symbol","customerData","writeValue","filter","orderBy","limit","offset"];return data=>{if(data.error===TcHmi.Errors.NONE)if(data.response)if(data.response.error)TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Symbol:"ListEvents"},TcHmi.Log.buildMessage(data.details));else if(data.response.commands&&0!==data.response.commands.length)for(const command of data.response.commands)if(command.error)TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Symbol:"ListEvents"},TcHmi.Log.buildMessage(data.response.commands[0].error));else for(const[checkCommand,handler]of commands){let matches=!0;for(let prop of Object.keys(checkCommand))if(propertiesToCheck.includes(prop)&&!tchmi_equal(checkCommand[prop],command[prop])){matches=!1;break}if(matches){handler(command,data);break}}else TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Symbol:"ListEvents"},TcHmi.Log.buildMessage({code:TcHmi.Errors.E_SERVER_COMMANDS_MISSING,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_COMMANDS_MISSING],reason:"Missing commands in response from server with id: "+data.response.id,domain:this.__type}));else TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Symbol:"ListEvents"},TcHmi.Log.buildMessage({code:TcHmi.Errors.E_SERVER_RESPONSE_MISSING,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_RESPONSE_MISSING],reason:"Missing response from server.",domain:this.__type}));else TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Symbol:"ListEvents"},TcHmi.Log.buildMessage(data.details))}}__getToggleButtonCommands(){const commands=new Map;function getToggleButtonSubscriptionHandler(toggleButton){return(command,data)=>{toggleButton.setText(command.maxEntries?command.maxEntries.toString():"0")}}for(const[type,button]of this.__typeToggles){if(!button)continue;const filter=new TcHmi.FilterInstance("type","==",type).and(this.__internalFilter).getFilter();commands.set({commandOptions:["SendErrorMessage"],symbol:"ListEvents",limit:0,filter},getToggleButtonSubscriptionHandler(button))}for(const[severity,button]of this.__severityToggles){if(!button)continue;const filter=new TcHmi.FilterInstance("severity","==",severity).and(this.__noPayloadsFilter).getFilter();commands.set({commandOptions:["SendErrorMessage"],symbol:"ListEvents",limit:0,filter},getToggleButtonSubscriptionHandler(button))}return commands}__getConfirmAllCommand(){return[{commandOptions:["SendErrorMessage"],symbol:"ListEvents",filter:this.__getConfirmAllFilter(),limit:0},(command,data)=>{this.__menuBarButtons.get("confirmAll")?.setIsEnabled((command.maxEntries??0)>0)}]}__getConfirmAllFilter(){return new TcHmi.FilterInstance("type","==",TcHmi.Server.Events.Type.Alarm).and("confirmationState","==",TcHmi.Server.Events.ConfirmationState.WaitForConfirmation).and(this.__internalFilter).getFilter()}__getCanConfirmCommand(){return[{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:"GetSymbolAccess",writeValue:"ConfirmAlarm"},(cmd,data)=>{this.__setCanConfirm((cmd.readValue??TcHmi.Server.ACCESS.NONE)>=TcHmi.Server.ACCESS.WRITE)}]}__getThemedIcons(){let getThemedIconValue=name=>{let themedResource=TcHmi.Theme.Resources.get(this,name);return themedResource.error===TcHmi.Errors.NONE&&themedResource.value?(themedResource.value.imagePath=TcHmi.Theme.Resources.resolveBasePath(this,themedResource)+themedResource.value.imagePath,themedResource.value):null},icons={types:new Map,severities:new Map};return icons.types.set(TcHmi.Server.Events.Type.Message,getThemedIconValue("MessageIcon")),icons.types.set(TcHmi.Server.Events.Type.Alarm,getThemedIconValue("AlarmIcon")),icons.severities.set(TcHmi.Server.Events.Severity.Verbose,getThemedIconValue("VerboseIcon")),icons.severities.set(TcHmi.Server.Events.Severity.Info,getThemedIconValue("InfoIcon")),icons.severities.set(TcHmi.Server.Events.Severity.Warning,getThemedIconValue("WarningIcon")),icons.severities.set(TcHmi.Server.Events.Severity.Error,getThemedIconValue("ErrorIcon")),icons.severities.set(TcHmi.Server.Events.Severity.Critical,getThemedIconValue("CriticalIcon")),icons}setColumns(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Columns"));let resolverInfo=this.__objectResolvers.get("columns");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,{parentControl:this,type:this.getAttributeDescription("Columns")?.type});this.__objectResolvers.set("columns",{resolver,watchCallback:this.__onResolverForColumnsWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForColumnsWatchCallback)})}__onResolverForColumnsWatchCallback(data){this.__isAttached||this.__suspendObjectResolver("columns"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.getColumns())||(this.__columns=data.value,this.__processColumns()):TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Attribute:"Columns"},`Resolving symbols from object failed with error: ${TcHmi.Log.buildMessage(data.details)}`)}getColumns(){return void 0!==this.__columns?this.__internalColumns:void 0}__processColumns(){this.__updateColumns(this.__columns??[],!0)}__updateColumns(columns,forceRaiseEvent=!1){const raiseEvent=forceRaiseEvent||!tchmi_equal(this.__internalColumns,columns);this.__internalColumns=columns,raiseEvent&&TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Columns"});let columnConfig=columns.map(column=>{let dgColumn;return dgColumn=this.__availableColumns[column.columnName]?tchmi_clone_object(this.__availableColumns[column.columnName]):{name:column.columnName,label:column.label??column.columnName,control:"TextBlock",width:150,widthUnit:"px",resize:!0,minWidth:50,minWidthUnit:"px",editable:!1,sortable:!0,horizontalAlignment:"Left",verticalAlignment:"Center"},void 0!==column.width&&(dgColumn.width=column.width,column.widthUnit&&(dgColumn.widthUnit=column.widthUnit)),("type"===dgColumn.name||"severity"===dgColumn.name)&&dgColumn.dataDefinitions&&Array.isArray(dgColumn.dataDefinitions)&&dgColumn.dataDefinitions.forEach(definition=>{let icon="type"===dgColumn.name?this.__themedIcons.types.get(definition.value):this.__themedIcons.severities.get(definition.value);icon&&(definition.source=icon.imagePath,definition.width=icon.width,definition.height=icon.height)}),dgColumn.sortable&&void 0!==column.sortable&&(dgColumn.sortable=column.sortable),column.format&&!1!==column.format.active&&(dgColumn.format=column.format),dgColumn.ignoreEscapeSequences=this.__ignoreEscapeSequences,dgColumn});this.__datagrid.setSrcColumn(columnConfig)}setFilter(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Filter"));let resolverInfo=this.__objectResolvers.get("filter");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,{parentControl:this,type:this.getAttributeDescription("Filter")?.type});this.__objectResolvers.set("filter",{resolver,watchCallback:this.__onResolverForFilterWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForFilterWatchCallback)})}__onResolverForFilterWatchCallback(data){this.__isAttached||this.__suspendObjectResolver("filter"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.getFilter())||(this.__filter=data.value,this.__processFilter()):TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Attribute:"Filter"},`Resolving symbols from object failed with error: ${TcHmi.Log.buildMessage(data.details)}`)}getFilter(){return this.__filter?this.__internalFilter:this.__filter}__processFilter(){this.__updateFilter(this.__filter??[],!0)}__updateFilter(filter,forceRaiseEvent=!1){const raiseEvent=forceRaiseEvent||!tchmi_equal(this.__internalFilter,filter);this.__internalFilter=filter,raiseEvent&&TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Filter"}),this.__isAttached&&(this.__noPayloadsFilter=new TcHmi.FilterInstance(filter).wrapInBrackets().and("type","!=",TcHmi.Server.Events.Type.Payload),this.__updateDatagridFilter(),this.__updateSubscription())}__updateDatagridFilter(){let hideFilter=new TcHmi.FilterInstance(this.__noPayloadsFilter);for(const[type,show]of this.__typesToShow)show||hideFilter.and("type","!=",type);for(const[severity,show]of this.__severitiesToShow)show||hideFilter.and("severity","!=",severity);this.__datagrid.setFilter(hideFilter.getFilter())}setSorting(valueNew){this.__datagrid.setSorting(valueNew),this.__sortingInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Sorting"}),this.__sortingInitialized=!0)}getSorting(){return this.__sortingInitialized?this.__datagrid.getSorting():void 0}setServerInterval(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ServerInterval")),convertedValue!==this.__serverInterval&&(this.__serverInterval=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ServerInterval"}),this.__processServerInterval())}getServerInterval(){return this.__serverInterval}__processServerInterval(){void 0!==this.__serverInterval&&null!==this.__serverInterval?this.__datagrid.setDataSymbol(new TcHmi.Symbol(`%s%ListEvents|Interval=${this.__serverInterval}%/s%`)):this.__datagrid.setDataSymbol(new TcHmi.Symbol("%s%ListEvents%/s%")),this.__updateSubscription()}setHeaderFontFamily(valueNew){this.__datagrid.setHeaderFontFamily(valueNew),this.__headerFontFamilyInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontFamily"}),this.__headerFontFamilyInitialized=!0)}getHeaderFontFamily(){return this.__headerFontFamilyInitialized?this.__datagrid.getHeaderFontFamily():void 0}setHeaderFontSize(valueNew){this.__datagrid.setHeaderFontSize(valueNew),this.__headerFontSizeInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontSize"}),this.__headerFontSizeInitialized=!0)}getHeaderFontSize(){return this.__headerFontSizeInitialized?this.__datagrid.getHeaderFontSize():void 0}setHeaderFontSizeUnit(valueNew){this.__datagrid.setHeaderFontSizeUnit(valueNew),this.__headerFontSizeUnitInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontSizeUnit"}),this.__headerFontSizeUnitInitialized=!0)}getHeaderFontSizeUnit(){return this.__headerFontSizeUnitInitialized?this.__datagrid.getHeaderFontSizeUnit():void 0}setHeaderFontStyle(valueNew){this.__datagrid.setHeaderFontStyle(valueNew),this.__headerFontStyleInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontStyle"}),this.__headerFontStyleInitialized=!0)}getHeaderFontStyle(){return this.__headerFontStyleInitialized?this.__datagrid.getHeaderFontStyle():void 0}setHeaderFontWeight(valueNew){this.__datagrid.setHeaderFontWeight(valueNew),this.__headerFontWeightInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderFontWeight"}),this.__headerFontWeightInitialized=!0)}getHeaderFontWeight(){return this.__headerFontWeightInitialized?this.__datagrid.getHeaderFontWeight():void 0}setGridFontFamily(valueNew){this.__datagrid.setGridFontFamily(valueNew),this.__datagrid.setRowNumbersFontFamily(valueNew),this.__gridFontFamilyInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontFamily"}),this.__gridFontFamilyInitialized=!0)}getGridFontFamily(){return this.__gridFontFamilyInitialized?this.__datagrid.getGridFontFamily():void 0}setGridFontSize(valueNew){this.__datagrid.setGridFontSize(valueNew),this.__datagrid.setRowNumbersFontSize(valueNew),this.__gridFontSizeInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontSize"}),this.__gridFontSizeInitialized=!0)}getGridFontSize(){return this.__gridFontSizeInitialized?this.__datagrid.getGridFontSize():void 0}setGridFontSizeUnit(valueNew){this.__datagrid.setGridFontSizeUnit(valueNew),this.__datagrid.setRowNumbersFontSizeUnit(valueNew),this.__gridFontSizeUnitInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontSizeUnit"}),this.__gridFontSizeUnitInitialized=!0)}getGridFontSizeUnit(){return this.__gridFontSizeUnitInitialized?this.__datagrid.getGridFontSizeUnit():void 0}setGridFontStyle(valueNew){this.__datagrid.setGridFontStyle(valueNew),this.__datagrid.setRowNumbersFontStyle(valueNew),this.__gridFontStyleInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontStyle"}),this.__gridFontStyleInitialized=!0)}getGridFontStyle(){return this.__gridFontStyleInitialized?this.__datagrid.getGridFontStyle():void 0}setGridFontWeight(valueNew){this.__datagrid.setGridFontWeight(valueNew),this.__datagrid.setRowNumbersFontWeight(valueNew),this.__gridFontWeightInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridFontWeight"}),this.__gridFontWeightInitialized=!0)}getGridFontWeight(){return this.__gridFontWeightInitialized?this.__datagrid.getGridFontWeight():void 0}setHeaderHeight(valueNew){this.__datagrid.setHeaderHeight(valueNew),this.__headerHeightInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderHeight"}),this.__headerHeightInitialized=!0)}getHeaderHeight(){return this.__headerHeightInitialized?this.__datagrid.getHeaderHeight():void 0}setHeaderHeightUnit(valueNew){this.__datagrid.setHeaderHeightUnit(valueNew),this.__headerHeightUnitInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderHeightUnit"}),this.__headerHeightUnitInitialized=!0)}getHeaderHeightUnit(){return this.__headerHeightUnitInitialized?this.__datagrid.getHeaderHeightUnit():void 0}setRowHeight(valueNew){this.__datagrid.setRowHeight(valueNew),this.__rowHeightInitialized||(TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowHeight"}),this.__rowHeightInitialized=!0)}getRowHeight(){return this.__rowHeightInitialized?this.__datagrid.getRowHeight():void 0}getRowHeightUnit(){return"px"}setIgnoreEscapeSequences(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("IgnoreEscapeSequences")),convertedValue!==this.__ignoreEscapeSequences&&(this.__ignoreEscapeSequences=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"IgnoreEscapeSequences"}),this.__processColumns())}getIgnoreEscapeSequences(){return this.__ignoreEscapeSequences}setAllowDetailsPopup(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("AllowDetailsPopup")),convertedValue!==this.__allowDetailsPopup&&(this.__allowDetailsPopup=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"AllowDetailsPopup"}),this.__processAllowDetailsPopup())}getAllowDetailsPopup(){return this.__allowDetailsPopup}__processAllowDetailsPopup(){}setShowMenuBar(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowMenuBar")),convertedValue!==this.__showMenuBar&&(this.__showMenuBar=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowMenuBar"}),this.__processShowMenuBar())}getShowMenuBar(){return this.__showMenuBar}__processShowMenuBar(){this.__showMenuBar?(TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"display",null),this.__fixVerticalMenuBarWidth()):TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"display","none")}setMenuBarPosition(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);(null===convertedValue||"Top"!==convertedValue&&"Bottom"!==convertedValue&&"Left"!==convertedValue&&"Right"!==convertedValue)&&(convertedValue=this.getAttributeDefaultValueInternal("MenuBarPosition")),convertedValue!==this.__menuBarPosition&&(this.__menuBarPosition=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarPosition"}),this.__processMenuBarPosition())}getMenuBarPosition(){return this.__menuBarPosition}__processMenuBarPosition(){switch(this.__menuBarPosition){case"Top":TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateRoot,"flex-direction",null),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"flex-direction",null);break;case"Bottom":TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateRoot,"flex-direction","column-reverse"),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"flex-direction",null);break;case"Left":TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateRoot,"flex-direction","row"),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"flex-direction","column");break;case"Right":TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateRoot,"flex-direction","row-reverse"),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"flex-direction","column")}this.__fixVerticalMenuBarWidth()}setButtonFontFamily(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ButtonFontFamily")),convertedValue!==this.__buttonFontFamily&&(this.__buttonFontFamily=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ButtonFontFamily"}),this.__processButtonFontFamily())}getButtonFontFamily(){return this.__buttonFontFamily}__processButtonFontFamily(){for(const button of this.__typeToggles.values())button&&button.setTextFontFamily(this.__buttonFontFamily??null);for(const button of this.__severityToggles.values())button&&button.setTextFontFamily(this.__buttonFontFamily??null)}setButtonFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ButtonFontSize")),convertedValue!==this.__buttonFontSize&&(this.__buttonFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ButtonFontSize"}),this.__processButtonFontSize())}getButtonFontSize(){return this.__buttonFontSize}__processButtonFontSize(){for(const button of this.__typeToggles.values())button&&button.setTextFontSize(this.__buttonFontSize??null);for(const button of this.__severityToggles.values())button&&button.setTextFontSize(this.__buttonFontSize??null)}setButtonFontSizeUnit(valueNew){let convertedValue=TcHmi.ValueConverter.toDimensionUnit(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ButtonFontSizeUnit")),convertedValue!==this.__buttonFontSizeUnit&&(this.__buttonFontSizeUnit=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ButtonFontSizeUnit"}),this.__processButtonFontSizeUnit())}getButtonFontSizeUnit(){return this.__buttonFontSizeUnit}__processButtonFontSizeUnit(){for(const button of this.__typeToggles.values())button&&button.setTextFontSizeUnit(this.__buttonFontSizeUnit??null);for(const button of this.__severityToggles.values())button&&button.setTextFontSizeUnit(this.__buttonFontSizeUnit??null)}setButtonFontStyle(valueNew){let convertedValue=TcHmi.ValueConverter.toFontStyle(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ButtonFontStyle")),convertedValue!==this.__buttonFontStyle&&(this.__buttonFontStyle=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ButtonFontStyle"}),this.__processButtonFontStyle())}getButtonFontStyle(){return this.__buttonFontStyle}__processButtonFontStyle(){for(const button of this.__typeToggles.values())button&&button.setTextFontStyle(this.__buttonFontStyle??null);for(const button of this.__severityToggles.values())button&&button.setTextFontStyle(this.__buttonFontStyle??null)}setButtonFontWeight(valueNew){let convertedValue=TcHmi.ValueConverter.toFontWeight(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ButtonFontWeight")),convertedValue!==this.__buttonFontWeight&&(this.__buttonFontWeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ButtonFontWeight"}),this.__processButtonFontWeight())}getButtonFontWeight(){return this.__buttonFontWeight}__processButtonFontWeight(){for(const button of this.__typeToggles.values())button&&button.setTextFontWeight(this.__buttonFontWeight??null);for(const button of this.__severityToggles.values())button&&button.setTextFontWeight(this.__buttonFontWeight??null)}setButtonHeight(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ButtonHeight")),convertedValue!==this.__buttonHeight&&(this.__buttonHeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ButtonHeight"}),this.__processButtonHeight())}getButtonHeight(){return this.__buttonHeight}__processButtonHeight(){for(const button of this.__typeToggles.values())button&&(button.setHeight(this.__buttonHeight??null),button.setWidth(void 0!==this.__buttonHeight?2*this.__buttonHeight:null));for(const button of this.__severityToggles.values())button&&(button.setHeight(this.__buttonHeight??null),button.setWidth(void 0!==this.__buttonHeight?2*this.__buttonHeight:null));for(const button of this.__menuBarButtons.values())button&&(button.setHeight(this.__buttonHeight??null),button.setWidth(this.__buttonHeight??null));this.__fixVerticalMenuBarWidth()}getButtonHeightUnit(){return"px"}__fixVerticalMenuBarWidth(){let flexboxes=this.__elementMenuBar.add(this.__elementMenuBar.children());if(TcHmi.StyleProvider.setSimpleElementStyle(flexboxes,"min-width",null),"Left"===this.__menuBarPosition||"Right"===this.__menuBarPosition)for(let i=flexboxes.length-1;i>=0;i--){let lastElement=flexboxes[i].lastElementChild;if(lastElement){let menuBarWidth=lastElement.getBoundingClientRect().right-flexboxes[i].getBoundingClientRect().left;TcHmi.StyleProvider.setSimpleElementStyle(flexboxes[i],"min-width",menuBarWidth+"px")}}}getSelectedEvent(){return this.__datagrid?this.__datagrid.getSelectedRowValue():null}confirmSelectedAlarm(ctx){if(!ctx)throw new TypeError("Parameter 'ctx' must be defined.");if(!ctx.success||!ctx.error)throw new TypeError("Parameter 'ctx' must be defined properly. Either 'success' or 'error' or both are missing.");if("function"!=typeof ctx.success||"function"!=typeof ctx.error)throw new TypeError("Parameter 'ctx' must be defined properly. Either 'success' or 'error' or both are not of type 'function'.");let alarm=this.getSelectedEvent();alarm?TcHmi.Server.Events.isAlarm(alarm)?TcHmi.Server.Events.confirmAlarm(alarm,data=>{data.error!==TcHmi.Errors.NONE?(TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,`Unable to confirm alarm with id ${alarm.id} in domain ${alarm.domain}. Error: ${TcHmi.Log.buildMessage(data.details)}`),ctx.error(data.error,data.details)):ctx.success(data.error)}):ctx.error(TcHmi.Errors.E_INVALID,{code:TcHmi.Errors.E_INVALID,message:TcHmi.Errors[TcHmi.Errors.E_INVALID],reason:"The selected event is not an alarm. Select an alarm to be able to confirm it.",domain:this.__type}):ctx.success(TcHmi.Errors.NONE)}confirmAllAlarms(ctx){if(!ctx)throw new TypeError("Parameter 'ctx' must be defined.");if(!ctx.success||!ctx.error)throw new TypeError("Parameter 'ctx' must be defined properly. Either 'success' or 'error' or both are missing.");if("function"!=typeof ctx.success||"function"!=typeof ctx.error)throw new TypeError("Parameter 'ctx' must be defined properly. Either 'success' or 'error' or both are not of type 'function'.");const commands=new Map;commands.set({commandOptions:["SendErrorMessage"],symbol:"ListEvents",filter:this.__getConfirmAllFilter()},(command,data)=>{if(!command.readValue){let error={code:TcHmi.Errors.E_SERVER_READVALUE_MISSING,message:TcHmi.Errors[TcHmi.Errors.E_SERVER_READVALUE_MISSING],reason:'Missing property: "readValue" in command for symbol: "ListEvents" in response from server with id: '+data.response?.id,domain:this.__type};return TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,{Symbol:"ListEvents"},TcHmi.Log.buildMessage(error)),void ctx.error(TcHmi.Errors.E_SERVER_READVALUE_MISSING,error)}const alarms=command.readValue.map(TcHmi.Server.Events.parseServerEvent).filter(TcHmi.Server.Events.isAlarm);let confirmErrors=[];for(let i=0,ii=alarms.length;i<ii;i++)TcHmi.Server.Events.confirmAlarm(alarms[i],data=>{if(data.error!==TcHmi.Errors.NONE&&(TcHmi.Log.Controls.error(this,TcHmiEventGrid.#tchmiFQN,`Unable to confirm alarm with id ${alarms[i].id} in domain ${alarms[i].domain}. Error: ${TcHmi.Log.buildMessage(data.details)}`),data.details&&confirmErrors.push(data.details)),"object"==typeof data.details&&null!==data.details&&data.details.code===TcHmi.Server.Error.HMI_E_INSUFFICIENT_ACCESS&&this.__setCanConfirm(!1),i===alarms.length-1)if(1===confirmErrors.length)ctx.error(confirmErrors[0].code,confirmErrors[0]);else if(confirmErrors.length>1){let error={code:TcHmi.Errors.ERROR,message:TcHmi.Errors[TcHmi.Errors.ERROR],reason:"[Source=Control, Module="+this.__type+(TcHmiEventGrid.#tchmiFQN!==this.__type?", Origin="+TcHmiEventGrid.#tchmiFQN:"")+", Id="+this.getId()+"] Unable to confirm multiple alarms.",domain:this.__type,errors:confirmErrors};ctx.error(TcHmi.Errors.ERROR,error)}else ctx.success(TcHmi.Errors.NONE)})}),TcHmi.Server.requestEx({requestType:"ReadWrite",commands:Array.from(commands.keys())},null,this.__getServerResponseHandler(commands))}__processIsEnabled(){super.__processIsEnabled(),this.getIsEnabled()||this.__hideAllPopups()}__processAccessConfig(){super.__processAccessConfig(),!1!==TcHmi.Access.checkAccess(this,"operate")&&!1!==TcHmi.Access.checkAccess(this,"observe")||this.__hideAllPopups(),TcHmi.Access.checkAccess(this,"configure")||(this.__filterPrompt&&this.__filterPrompt.hide(),this.__columnsPopup&&this.__columnsPopup.hide()),TcHmi.Access.checkAccess(this,"viewDetails")||this.__detailsPopup&&this.__detailsPopup.hide()}__hideAllPopups(){this.__filterPrompt&&this.__filterPrompt.hide(),this.__columnsPopup&&this.__columnsPopup.hide(),this.__detailsPopup&&this.__detailsPopup.hide(),this.__confirmAllPopup&&this.__confirmAllPopup.hide()}__setCanConfirm(value){this.__canConfirm!==value&&(this.__canConfirm=value,this.__detailsPopup&&this.__detailsPopup.__setCanConfirm(value),TcHmi.Access.setControlRightOverride(this.__menuBarButtons.get("confirm"),"operate",value?null:"Deny"),TcHmi.Access.setControlRightOverride(this.__menuBarButtons.get("confirmAll"),"operate",value?null:"Deny"))}__getCanConfirm(){return this.__canConfirm}}})();TcHmi.Controls.registerEx("TcHmiEventGrid","TcHmi.Controls.Beckhoff",TcHmiEventGrid,{injectInGlobalObject:!0});export{TcHmiEventGrid as Control};