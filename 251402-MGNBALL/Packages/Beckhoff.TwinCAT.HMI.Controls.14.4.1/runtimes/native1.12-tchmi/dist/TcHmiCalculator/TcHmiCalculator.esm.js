var __runInitializers=this&&this.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=this&&this.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};import{ContextMenu}from"./ContextMenu.js";let TcHmiCalculator=(()=>{let ___onScientificKeyClick_decorators,___onHistoryKeyClick_decorators,___onHistoryAllDeleteClick_decorators,___onResultCopyClick_decorators,___onDisplayTermSpanClick_decorators,___onInputPaste_decorators,___onKeyboardKeyClick_decorators,___onKeyboardKeyPointerDown_decorators,___onKeyboardKeyPointerUp_decorators,___onKeyboardKeyPointerLeave_decorators,___onKeyDown_decorators,___onPointerDown_decorators,_classSuper=TcHmi.Controls.System.TcHmiControl,_instanceExtraInitializers=[];return class TcHmiCalculator extends _classSuper{static{const _metadata="function"==typeof Symbol&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;___onScientificKeyClick_decorators=[TcHmi.EventHandler()],___onHistoryKeyClick_decorators=[TcHmi.EventHandler()],___onHistoryAllDeleteClick_decorators=[TcHmi.EventHandler()],___onResultCopyClick_decorators=[TcHmi.EventHandler()],___onDisplayTermSpanClick_decorators=[TcHmi.EventHandler()],___onInputPaste_decorators=[TcHmi.EventHandler()],___onKeyboardKeyClick_decorators=[TcHmi.EventHandler()],___onKeyboardKeyPointerDown_decorators=[TcHmi.EventHandler()],___onKeyboardKeyPointerUp_decorators=[TcHmi.EventHandler()],___onKeyboardKeyPointerLeave_decorators=[TcHmi.EventHandler()],___onKeyDown_decorators=[TcHmi.EventHandler()],___onPointerDown_decorators=[TcHmi.EventHandler()],__esDecorate(this,null,___onScientificKeyClick_decorators,{kind:"method",name:"__onScientificKeyClick",static:!1,private:!1,access:{has:obj=>"__onScientificKeyClick"in obj,get:obj=>obj.__onScientificKeyClick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onHistoryKeyClick_decorators,{kind:"method",name:"__onHistoryKeyClick",static:!1,private:!1,access:{has:obj=>"__onHistoryKeyClick"in obj,get:obj=>obj.__onHistoryKeyClick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onHistoryAllDeleteClick_decorators,{kind:"method",name:"__onHistoryAllDeleteClick",static:!1,private:!1,access:{has:obj=>"__onHistoryAllDeleteClick"in obj,get:obj=>obj.__onHistoryAllDeleteClick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResultCopyClick_decorators,{kind:"method",name:"__onResultCopyClick",static:!1,private:!1,access:{has:obj=>"__onResultCopyClick"in obj,get:obj=>obj.__onResultCopyClick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onDisplayTermSpanClick_decorators,{kind:"method",name:"__onDisplayTermSpanClick",static:!1,private:!1,access:{has:obj=>"__onDisplayTermSpanClick"in obj,get:obj=>obj.__onDisplayTermSpanClick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onInputPaste_decorators,{kind:"method",name:"__onInputPaste",static:!1,private:!1,access:{has:obj=>"__onInputPaste"in obj,get:obj=>obj.__onInputPaste},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onKeyboardKeyClick_decorators,{kind:"method",name:"__onKeyboardKeyClick",static:!1,private:!1,access:{has:obj=>"__onKeyboardKeyClick"in obj,get:obj=>obj.__onKeyboardKeyClick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onKeyboardKeyPointerDown_decorators,{kind:"method",name:"__onKeyboardKeyPointerDown",static:!1,private:!1,access:{has:obj=>"__onKeyboardKeyPointerDown"in obj,get:obj=>obj.__onKeyboardKeyPointerDown},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onKeyboardKeyPointerUp_decorators,{kind:"method",name:"__onKeyboardKeyPointerUp",static:!1,private:!1,access:{has:obj=>"__onKeyboardKeyPointerUp"in obj,get:obj=>obj.__onKeyboardKeyPointerUp},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onKeyboardKeyPointerLeave_decorators,{kind:"method",name:"__onKeyboardKeyPointerLeave",static:!1,private:!1,access:{has:obj=>"__onKeyboardKeyPointerLeave"in obj,get:obj=>obj.__onKeyboardKeyPointerLeave},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onKeyDown_decorators,{kind:"method",name:"__onKeyDown",static:!1,private:!1,access:{has:obj=>"__onKeyDown"in obj,get:obj=>obj.__onKeyDown},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onPointerDown_decorators,{kind:"method",name:"__onPointerDown",static:!1,private:!1,access:{has:obj=>"__onPointerDown"in obj,get:obj=>obj.__onPointerDown},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static#tchmiFQN="TcHmi.Controls.Beckhoff."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__destroyLayoutKeysDomEvents=(__runInitializers(this,_instanceExtraInitializers),[]);__destroyMenuKeysDomEvents=[];__destroyHistoryElementsDomEvents=[];__result;__layout;__elementTemplateRoot;__elementCalculatorContainer;__elementHistoryContainer;__elementHistoryScrollContainer;__elementHistoryMenuContainer;__elementFullDisplayContainer;__elementKeyboardContainer;__elementDisplayTermContainer;__elementDisplayResultTermInput;__elementDisplayResultTermContainer;__elementDisplayTermSpan;__elementMenuBarContainer;__elementScientificIcon;__elementHistoryIcon;__elementDeleteHistoryIcon;__elementResultCopyIconContainer;__elementInputContextMenu;__layoutObject;__currentKeyboardButtons=new WeakMap;__historyElements=[];__historyCache=[];__displayTermBuffer=[];__oldResult="";__lastOperationWasEquation=!1;__isDeg=!1;__decimalSeparator=".";__localizedElements=new Map;__localizationReader=void 0;__previnit(){this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiCalculator-template")[0],this.__elementFullDisplayContainer=this.__elementTemplateRoot.getElementsByClassName("full-display-container")[0],this.__elementKeyboardContainer=this.__elementTemplateRoot.getElementsByClassName("keyboard-container")[0],this.__elementDisplayTermContainer=this.__elementTemplateRoot.getElementsByClassName("display-term-container")[0],this.__elementDisplayResultTermContainer=this.__elementTemplateRoot.getElementsByClassName("display-result-term-container")[0],this.__elementMenuBarContainer=this.__elementTemplateRoot.getElementsByClassName("menu-bar-container")[0],this.__elementHistoryIcon=this.__elementTemplateRoot.getElementsByClassName("history-icon-container")[0],this.__elementCalculatorContainer=this.__elementTemplateRoot.getElementsByClassName("calculator-container")[0],this.__elementHistoryContainer=this.__elementTemplateRoot.getElementsByClassName("history-container")[0],this.__elementHistoryScrollContainer=this.__elementTemplateRoot.getElementsByClassName("history-scroll-container")[0],this.__elementHistoryMenuContainer=this.__elementTemplateRoot.getElementsByClassName("history-menu-container")[0],this.__elementDisplayResultTermInput=this.__elementTemplateRoot.getElementsByClassName("display-result-term-input")[0],this.__elementDisplayTermSpan=this.__elementTemplateRoot.getElementsByClassName("display-term-span")[0],this.__elementResultCopyIconContainer=this.__elementTemplateRoot.getElementsByClassName("result-term-copy-icon-container")[0];let localizedElements=this.__element[0].querySelectorAll("[data-tchmi-localized-content-key]");for(let i=0,ii=localizedElements.length;i<ii;i++){let element=localizedElements[i],localizeKey=element.dataset.tchmiLocalizedContentKey;localizeKey&&this.__localizedElements.set(element,{key:localizeKey})}this.__destroyOnDestroy.push(this.__localization.watch(data=>{if(data.error===TcHmi.Errors.NONE&&data.reader){this.__localizationReader=data.reader;for(const[element,info]of this.__localizedElements){let localizedText=data.reader.get(info.key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}})),super.__previnit()}__init(){super.__init();const svgCopyResultElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgCopyResultElement.classList.add("key-svg-element"),svgCopyResultElement.setAttribute("width","22"),svgCopyResultElement.setAttribute("height","22");const pathCopyResultElement=document.createElementNS("http://www.w3.org/2000/svg","path");pathCopyResultElement.classList.add("key-svg-path-element"),pathCopyResultElement.setAttribute("d","M 3 8 L 3 17 C 3 18 4 19 5 19 L 14 19 C 15 19 16 18 16 17 L 16 8 C 16 7 15 6 14 6 L 5 6 C 4 6 3 7 3 8 M 6 6 L 6 5 C 6 4 7 3 8 3 L 17 3 C 18 3 19 4 19 5 L 19 14 C 19 15 18 16 17 16 L 16 16"),svgCopyResultElement.appendChild(pathCopyResultElement),this.__elementResultCopyIconContainer.append(svgCopyResultElement);const historyIconContainer=document.createElement("div");historyIconContainer.classList.add("svg-icon-container","svg-history-icon-container");const svgHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgHistoryElement.classList.add("key-svg-element"),svgHistoryElement.setAttribute("width","22"),svgHistoryElement.setAttribute("height","22");const pathHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","path");pathHistoryElement.classList.add("key-svg-path-element"),pathHistoryElement.setAttribute("d","M 1 11 A 1 1 0 0 0 21 11 M 3 5 A 1 1 0 0 1 19 17 M 7 5 L 3 5 L 3 1 M 11 5 L 11 11 L 15 11"),svgHistoryElement.appendChild(pathHistoryElement),historyIconContainer.append(svgHistoryElement),this.__elementMenuBarContainer.appendChild(historyIconContainer),this.__elementHistoryIcon=historyIconContainer;const scientificIconContainer=document.createElement("div");scientificIconContainer.classList.add("svg-icon-container","svg-scientific-icon-container");const svgScientificElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgScientificElement.classList.add("key-svg-element"),svgScientificElement.setAttribute("width","22"),svgScientificElement.setAttribute("height","22"),scientificIconContainer.append(svgScientificElement),this.__elementMenuBarContainer.appendChild(scientificIconContainer),this.__elementScientificIcon=scientificIconContainer;const deleteHistoryIconContainer=document.createElement("div");deleteHistoryIconContainer.classList.add("svg-icon-container","svg-history-delete-icon-container");const svgDeleteHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgDeleteHistoryElement.classList.add("key-svg-element"),svgDeleteHistoryElement.setAttribute("width","22"),svgDeleteHistoryElement.setAttribute("height","22");const pathDeleteHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","path");pathDeleteHistoryElement.classList.add("key-svg-path-element"),pathDeleteHistoryElement.setAttribute("d","M 3 5 L 4 21 L 17 21 L 18 5 M 1 5 L 20 5 M 8 5 C 8 3 12 3 12 5 M 8 8 L 8 18 M 13 18 L 13 8"),svgDeleteHistoryElement.appendChild(pathDeleteHistoryElement),deleteHistoryIconContainer.append(svgDeleteHistoryElement),this.__elementHistoryMenuContainer.appendChild(deleteHistoryIconContainer),this.__elementDeleteHistoryIcon=deleteHistoryIconContainer,this.__elementDisplayResultTermInput.value="0",this.__displayTermBuffer.push("0"),this.__openLayoutFile("Standard").then(layout=>{this.__openLayoutFileAsync(layout)}).catch(reason=>{TcHmi.Log.Controls.error(this,"LayoutFile","LayoutFile loading failed",reason)})}__attach(){super.__attach(),this.__destroyOnDetach.push(TcHmi.EventProvider.registerDomEvent(this.__elementTemplateRoot,"keydown",this.__onKeyDown,{passive:!1}),TcHmi.EventProvider.registerDomEvent(document,"pointerdown",this.__onPointerDown),TcHmi.EventProvider.registerDomEvent(this.__elementDisplayResultTermInput,"paste",this.__onInputPaste)),this.__destroyMenuKeysDomEvents.push(TcHmi.EventProvider.registerDomEvent(this.__elementHistoryIcon,"click",this.__onHistoryKeyClick),TcHmi.EventProvider.registerDomEvent(this.__elementDeleteHistoryIcon,"click",this.__onHistoryAllDeleteClick),TcHmi.EventProvider.registerDomEvent(this.__elementResultCopyIconContainer,"click",this.__onResultCopyClick),TcHmi.EventProvider.registerDomEvent(this.__elementDisplayTermSpan,"click",this.__onDisplayTermSpanClick),TcHmi.EventProvider.registerDomEvent(this.__elementScientificIcon,"click",this.__onScientificKeyClick));const ls=localStorage.getItem(this.__id+"_history");if(null!==ls){this.__historyCache=JSON.parse(ls);for(const historyEntry of this.__historyCache)this.__addToHistory(historyEntry,!0)}this.__processLayout(),this.__createInputElementContextMenu(this.__elementDisplayResultTermInput)}__detach(){super.__detach();for(const element of this.__localizedElements.keys())this.__removeLocalizedElement(element);for(const destroyEvent of this.__destroyLayoutKeysDomEvents)destroyEvent();this.__destroyLayoutKeysDomEvents=[];for(const destroyEvent of this.__destroyMenuKeysDomEvents)destroyEvent();this.__destroyMenuKeysDomEvents=[];for(const destroyEvent of this.__destroyHistoryElementsDomEvents)destroyEvent();this.__destroyHistoryElementsDomEvents=[];for(const historyElement of this.__historyElements)historyElement.remove();this.__historyElements=[],this.__elementInputContextMenu.removeTargetContextMenuEventListener()}destroy(){this.__keepAlive||super.destroy()}__addLocalizedElement(element,key,...parameters){let info={key};if(0!==parameters.length&&(info.parameters=parameters),this.__localizedElements.set(element,info),this.__localizationReader){let localizedText=this.__localizationReader.get(key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}__removeLocalizedElement(element){this.__localizedElements.delete(element)}__setResult(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Result")),convertedValue!==this.__result&&(this.__result=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Result"}),TcHmi.EventProvider.raise(this.__id+".onValueChanged"))}getResult(){return this.__result}__openLayoutFileAsync(layout){if(this.__currentKeyboardButtons=new WeakMap,this.__layoutObject=layout,this.__elementKeyboardContainer.innerHTML="",!this.__layoutObject)return;const keyboardInnerContainer=document.createElement("div");keyboardInnerContainer.classList.add("keyboard-inner-container"),this.__elementKeyboardContainer.appendChild(keyboardInnerContainer);for(const key of this.__layoutObject.keys){let keyElement;if("string"==typeof key.label)if(keyElement=document.createElement("div"),keyElement.classList.add("key-element"),"RadDeg"===key.key){const spanElementRad=document.createElement("span");spanElementRad.classList.add("key-span-element"),spanElementRad.classList.add("key-span-element-rad-deg"),spanElementRad.innerHTML="Rad";const spanElementDeg=document.createElement("span");spanElementDeg.classList.add("key-span-element"),spanElementDeg.classList.add("key-span-element-rad-deg"),spanElementDeg.classList.add("key-span-element-smaller-font"),spanElementDeg.innerHTML="Deg",keyElement.append(spanElementRad,spanElementDeg)}else{const spanElement=document.createElement("span");spanElement.classList.add("key-span-element"),spanElement.innerHTML=key.label,keyElement.append(spanElement)}else{keyElement=document.createElement("div"),keyElement.classList.add("key-element");const spanElement=document.createElement("span");spanElement.classList.add("key-span-element");const svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgElement.classList.add("key-svg-element"),svgElement.setAttribute("width",key.label.svg.dimensions.width.toString()),svgElement.setAttribute("height",key.label.svg.dimensions.height.toString()),spanElement.appendChild(svgElement);const pathElement=document.createElementNS("http://www.w3.org/2000/svg","path");pathElement.classList.add("key-svg-path-element"),pathElement.setAttribute("d",key.label.svg.path),svgElement.appendChild(pathElement),keyElement.appendChild(spanElement)}/^[0-9]$/.test(key.key)&&keyElement.classList.add("number"),keyboardInnerContainer.appendChild(keyElement),this.__currentKeyboardButtons.set(key,keyElement)}this.__setLayoutStyles(),this.__addEventsToCurrentLayoutKeys()}__addEventsToCurrentLayoutKeys(){for(const destroyEvent of this.__destroyLayoutKeysDomEvents)destroyEvent();if(this.__destroyLayoutKeysDomEvents=[],this.__layoutObject)for(const key of this.__layoutObject.keys){const keyElement=this.__currentKeyboardButtons.get(key);keyElement&&this.__destroyLayoutKeysDomEvents.push(TcHmi.EventProvider.registerDomEvent(keyElement,"click",this.__onKeyboardKeyClick),TcHmi.EventProvider.registerDomEvent(keyElement,"pointerdown",this.__onKeyboardKeyPointerDown),TcHmi.EventProvider.registerDomEvent(keyElement,"pointerup",this.__onKeyboardKeyPointerUp),TcHmi.EventProvider.registerDomEvent(keyElement,"pointerleave",this.__onKeyboardKeyPointerLeave))}}__onScientificKeyClick(){this.__elementScientificIcon.classList.toggle("active"),this.__elementScientificIcon.classList.contains("active")?this.setLayout("Scientific"):this.setLayout("Standard")}__onHistoryKeyClick(){this.__elementHistoryContainer.classList.toggle("hidden"),this.__elementHistoryIcon.classList.toggle("active")}__onHistoryAllDeleteClick(){for(const historyElement of this.__historyElements)historyElement.style.height="0px",historyElement.style.padding="0px";setTimeout(()=>{this.__deleteHistoryAndEvents(this.__historyElements)},500)}__onResultCopyClick(){const resultText=this.__elementDisplayResultTermInput.value||"";navigator.clipboard.writeText(resultText)}__onDisplayTermSpanClick(){this.__elementDisplayTermSpan.textContent&&this.__elementDisplayTermSpan.textContent.length>0&&(this.__elementDisplayResultTermInput.value=this.__elementDisplayTermSpan.textContent,this.__elementDisplayTermSpan.textContent="",this.__repairDisplayTermBuffer())}__onInputPaste(event){this.__elementDisplayResultTermInput.value=event.clipboardData?.getData("text")||""}__onKeyboardKeyClick(event){if(!this.__layoutObject)return;const key=event.currentTarget;for(const keyIt of this.__layoutObject.keys){const keyElement=this.__currentKeyboardButtons.get(keyIt);if(keyElement===key){if("RadDeg"===keyIt.key){const spanElements=keyElement.querySelectorAll(".key-span-element");for(const elem of spanElements)elem.classList.toggle("key-span-element-smaller-font");this.__isDeg=!this.__isDeg}else this.__serializeKeyToDisplay(keyIt);break}}}__onKeyboardKeyPointerDown(event){event.currentTarget.classList.add("down")}__onKeyboardKeyPointerUp(event){event.currentTarget.classList.remove("down")}__onKeyboardKeyPointerLeave(event){event.currentTarget.classList.remove("down")}__onKeyDown(event){if((event.ctrlKey||event.metaKey)&&("v"===event.key||"V"===event.key))return;const key=event.key;"+"===key?this.__serializeKeyToDisplay({label:key,key:"Addition"}):"-"===key?this.__serializeKeyToDisplay({label:key,key:"Subtraction"}):"*"===key?this.__serializeKeyToDisplay({label:"×",key:"Multiplication"}):"/"===key?this.__serializeKeyToDisplay({label:"÷",key:"Division"}):"Backspace"===key?this.__serializeKeyToDisplay({label:key,key}):"Delete"===key?this.__serializeKeyToDisplay({label:key,key:"ClearAll"}):/^[0-9]$/.test(key)?this.__serializeKeyToDisplay({label:key,key}):"Enter"===key||"NumpadEnter"===key?this.__serializeKeyToDisplay({label:key,key:"Equation"}):","===key||"."===key?this.__serializeKeyToDisplay({label:".",key}):("%"===key||"("===key||")"===key)&&this.__serializeKeyToDisplay({label:key,key})}__setLayoutStyles(){if(this.__layoutObject)for(const key of this.__layoutObject.keys){const keyElement=this.__currentKeyboardButtons.get(key);if(keyElement)if(keyElement.style.width=`${key.geometry.width}%`,keyElement.style.height=`${key.geometry.height}%`,keyElement.style.left=`${key.geometry.left}%`,keyElement.style.top=`${key.geometry.top}%`,keyElement.style.position="absolute",keyElement instanceof HTMLElement&&"string"==typeof key.label){const spanElement=keyElement.querySelector("key-span-element");spanElement&&(spanElement.innerText=key.label)}else if(keyElement instanceof SVGElement&&"string"!=typeof key.label){const pathElement=keyElement.querySelector("key-svg-path-element");pathElement&&pathElement.setAttribute("d",key.label.svg.path)}}}__serializeKeyToDisplay(keyObj){let lastNumber="",lastNumberCopyToModify="";const isInitZeroDisplayed=1===this.__displayTermBuffer.length&&"0"===this.__displayTermBuffer[0];switch(keyObj.key){case"Backspace":this.__lastOperationWasEquation=!1;const bufferText=this.__displayTermBuffer[this.__displayTermBuffer.length-1];if(bufferText?.length>0&&!isInitZeroDisplayed){const text=this.__elementDisplayResultTermInput.value||"";this.__elementDisplayResultTermInput.value=text.slice(0,-bufferText.length),this.__displayTermBuffer.pop()}0===this.__displayTermBuffer.length&&(this.__displayTermBuffer.push("0"),this.__elementDisplayResultTermInput.value="0");break;case"ClearAll":this.__lastOperationWasEquation=!1,this.__elementDisplayResultTermInput.value="0",this.__elementDisplayTermSpan.textContent="",this.__displayTermBuffer=[],this.__displayTermBuffer.push("0"),this.__setResult(null);break;case"Negation":if(this.__lastOperationWasEquation=!1,isInitZeroDisplayed)break;lastNumber="";for(let i=this.__displayTermBuffer.length-1;i>=0;i--){const str=this.__displayTermBuffer[i],num=TcHmi.ValueConverter.toNumber(str);if((null===num||isNaN(num))&&str!==this.__decimalSeparator)break;lastNumber=str+lastNumber,this.__displayTermBuffer.pop()}if(lastNumber.length>0&&lastNumber.endsWith(this.__decimalSeparator)&&(lastNumber+="0"),lastNumber.length>0){const negatedNumber=(-1*TcHmi.ValueConverter.toNumber(lastNumber)).toString();for(let i=0;i<negatedNumber.length;i++)"-"===negatedNumber[i]?(this.__displayTermBuffer.push(negatedNumber[i]+negatedNumber[i+1]),i++):this.__displayTermBuffer.push(negatedNumber[i])}this.__writeBufferToDisplayTermInput();break;case"Addition":case"Multiplication":case"Division":case"Subtraction":case"mod":case"EXP":this.__lastOperationWasEquation=!1;const inputText=" "+keyObj.label+" ";this.__elementDisplayResultTermInput.value+=inputText,this.__displayTermBuffer.push(inputText);break;case"Equation":if(this.__lastOperationWasEquation=!1,isInitZeroDisplayed)break;let result,term=this.__elementDisplayResultTermInput.value||"";const lastTerm=this.__historyCache.length>0?this.__historyCache[this.__historyCache.length-1].term:"";if(Number(term)&&this.__calculateTerm(lastTerm).value===Number(term)){term=term+" "+this.__getLastMathOperation(lastTerm),result=this.__calculateTerm(term)}else result=this.__calculateTerm(term);if(void 0===result.error&&void 0!==result.value){const checkedResult="object"==typeof result.value?"undefined":result.value.toString();this.__oldResult=this.__elementDisplayTermSpan.textContent||"",term!==lastTerm&&this.__addToHistory({term,result:checkedResult}),this.__elementDisplayResultTermInput.value=checkedResult,this.__displayTermBuffer=[],this.__displayTermBuffer.push(checkedResult),this.__elementDisplayTermSpan.textContent=term,this.__lastOperationWasEquation=!0,"undefined"!==checkedResult&&this.__setResult(result.value)}break;case"DecimalSeparator":this.__lastOperationWasEquation=!1,lastNumber=this.__extractLastNumberFromBuffer(),lastNumber.includes(this.__decimalSeparator)||0===lastNumber.length||(this.__displayTermBuffer.push(keyObj.label),this.__elementDisplayResultTermInput.value+=keyObj.label);break;case"tan":case"atan":case"cos":case"acos":case"sin":case"asin":case"ln":case"log":case"2Root":if(isInitZeroDisplayed&&(this.__displayTermBuffer=[],this.__elementDisplayResultTermInput.value=""),this.__lastOperationWasEquation=!1,lastNumber=this.__extractLastNumberFromBuffer(),lastNumberCopyToModify=lastNumber,lastNumber.length>0){const bufferCopy=this.__displayTermBuffer;for(let i=this.__displayTermBuffer.length-1;i>=0;i--){const currentChar=this.__displayTermBuffer[i];if(0===lastNumberCopyToModify.length)break;lastNumberCopyToModify=lastNumberCopyToModify.slice(0,-currentChar.length),bufferCopy.pop()}this.__displayTermBuffer=bufferCopy,"2Root"===keyObj.key?this.__displayTermBuffer.push("√("):this.__displayTermBuffer.push(keyObj.label+"(");for(let i=0;i<lastNumber.length;i++)"-"===lastNumber[i]?(this.__displayTermBuffer.push(lastNumber[i]+lastNumber[i+1]),i++):this.__displayTermBuffer.push(lastNumber[i]);this.__displayTermBuffer.push(")"),this.__mergeMathFunctionsInBuffer(),this.__writeBufferToDisplayTermInput()}else if("2Root"===keyObj.key)this.__displayTermBuffer.push("√("),this.__elementDisplayResultTermInput.value+="√(";else{const input=keyObj.label+"(";this.__displayTermBuffer.push(input),this.__elementDisplayResultTermInput.value+=input}break;case"nRoot":if(this.__lastOperationWasEquation=!1,lastNumber=this.__extractLastNumberFromBuffer(),lastNumberCopyToModify=lastNumber,lastNumber.length>0){const bufferCopy=this.__displayTermBuffer;for(let i=this.__displayTermBuffer.length-1;i>=0;i--){const currentChar=this.__displayTermBuffer[i];if(0===lastNumberCopyToModify.length)break;lastNumberCopyToModify=lastNumberCopyToModify.slice(0,-currentChar.length),bufferCopy.pop()}this.__displayTermBuffer=bufferCopy,this.__displayTermBuffer.push("nthRoot("+lastNumber+", "),this.__mergeMathFunctionsInBuffer(),this.__writeBufferToDisplayTermInput()}break;case"xPow2":case"xPowN":this.__lastOperationWasEquation=!1,lastNumber=this.__extractLastNumberFromBuffer(),lastNumber.length>0&&(isNaN(Number(lastNumber))&&!lastNumber.endsWith(")")||("xPow2"===keyObj.key?(this.__displayTermBuffer.push("^2"),this.__elementDisplayResultTermInput.value+="^2"):"xPowN"===keyObj.key&&(this.__displayTermBuffer.push("^"),this.__elementDisplayResultTermInput.value+="^")));break;case"Faculty":this.__lastOperationWasEquation=!1,lastNumber=this.__extractLastNumberFromBuffer(),lastNumber.length>0&&(this.__displayTermBuffer.push("!"),this.__elementDisplayResultTermInput.value+="!");break;case"Percentage":this.__lastOperationWasEquation=!1,lastNumber=this.__extractLastNumberFromBuffer(),lastNumber.length>0&&(this.__displayTermBuffer.push("%"),this.__elementDisplayResultTermInput.value+="%");break;default:this.__lastOperationWasEquation&&(this.__elementDisplayResultTermInput.value="",this.__displayTermBuffer=[],this.__lastOperationWasEquation=!1),isInitZeroDisplayed&&(this.__displayTermBuffer=[],this.__elementDisplayResultTermInput.value=""),this.__displayTermBuffer.push(keyObj.label),this.__elementDisplayResultTermInput.value+=keyObj.label}}__addToHistory(historyEntry,comesFromCache=!1){const historyElement=document.createElement("div");historyElement.addEventListener("click",event=>this.__onHistoryElementClick(event)),historyElement.addEventListener("contextmenu",event=>this.__onHistoryElementContextmenu(event)),historyElement.classList.add("history-element");const spanElementTerm=document.createElement("span");spanElementTerm.classList.add("history-span-element","history-span-element-term"),historyElement.appendChild(spanElementTerm);const replacedTerm=historyEntry.term.replace(/Ans/g,this.__oldResult);spanElementTerm.textContent=replacedTerm;const spanElementResult=document.createElement("span");spanElementResult.classList.add("history-span-element","history-span-element-result"),spanElementResult.textContent="= "+historyEntry.result,historyElement.appendChild(spanElementResult),this.__createHistoryElementContextMenu(historyElement),this.__historyElements.push(historyElement),this.__elementHistoryScrollContainer.prepend(historyElement),comesFromCache||(this.__historyCache.push({term:historyEntry.term,result:historyEntry.result}),localStorage.setItem(this.__id+"_history",JSON.stringify(this.__historyCache)))}__createHistoryElementContextMenu(historyElement){const tempContextMenu=new ContextMenu(historyElement,this.__elementHistoryScrollContainer),copyHistoryIconContainer=document.createElement("div");copyHistoryIconContainer.classList.add("svg-icon-container","svg-history-copy-icon-container"),window.isSecureContext?copyHistoryIconContainer.addEventListener("click",this.__onHistoryElementCopyClick.bind(this,historyElement,tempContextMenu)):copyHistoryIconContainer.classList.add("disabled"),historyElement.append(copyHistoryIconContainer);const svgCopyHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgCopyHistoryElement.classList.add("key-svg-element"),svgCopyHistoryElement.setAttribute("width","22"),svgCopyHistoryElement.setAttribute("height","22");const pathCopyHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","path");pathCopyHistoryElement.classList.add("key-svg-path-element"),pathCopyHistoryElement.setAttribute("d","M 3 8 L 3 17 C 3 18 4 19 5 19 L 14 19 C 15 19 16 18 16 17 L 16 8 C 16 7 15 6 14 6 L 5 6 C 4 6 3 7 3 8 M 6 6 L 6 5 C 6 4 7 3 8 3 L 17 3 C 18 3 19 4 19 5 L 19 14 C 19 15 18 16 17 16 L 16 16"),svgCopyHistoryElement.appendChild(pathCopyHistoryElement);const copyHistoryIconText=document.createElement("span");copyHistoryIconText.classList.add("svg-context-menu-span"),this.__addLocalizedElement(copyHistoryIconText,"CopyResult"),copyHistoryIconContainer.append(svgCopyHistoryElement,copyHistoryIconText),tempContextMenu.appendChild(copyHistoryIconContainer);const deleteHistoryIconContainer=document.createElement("div");deleteHistoryIconContainer.classList.add("svg-icon-container","svg-history-copy-icon-container"),window.isSecureContext?deleteHistoryIconContainer.addEventListener("click",this.__onHistoryElementDeleteClick.bind(this,historyElement,tempContextMenu)):deleteHistoryIconContainer.classList.add("disabled"),historyElement.append(deleteHistoryIconContainer);const svgDeleteHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgDeleteHistoryElement.classList.add("key-svg-element"),svgDeleteHistoryElement.setAttribute("width","22"),svgDeleteHistoryElement.setAttribute("height","22");const pathDeleteHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","path");pathDeleteHistoryElement.classList.add("key-svg-path-element"),pathDeleteHistoryElement.setAttribute("d","M 3 5 L 4 21 L 17 21 L 18 5 M 1 5 L 20 5 M 8 5 C 8 3 12 3 12 5 M 8 8 L 8 18 M 13 18 L 13 8"),svgDeleteHistoryElement.appendChild(pathDeleteHistoryElement);const deleteHistoryIconText=document.createElement("span");deleteHistoryIconText.classList.add("svg-context-menu-span"),this.__addLocalizedElement(deleteHistoryIconText,"DeleteHistoryElement"),deleteHistoryIconContainer.append(svgDeleteHistoryElement,deleteHistoryIconText),tempContextMenu.appendChild(deleteHistoryIconContainer)}__createInputElementContextMenu(inputElement){const environment=TcHmi.Environment.getBrowserCapabilities(),tempContextMenu=new ContextMenu(inputElement,this.__elementDisplayResultTermContainer);this.__elementInputContextMenu=tempContextMenu;const copyInputIconContainer=document.createElement("div");copyInputIconContainer.classList.add("svg-icon-container","svg-history-copy-icon-container"),window.isSecureContext?this.__destroyOnDetach.push(TcHmi.EventProvider.registerDomEvent(copyInputIconContainer,"click",this.__onInputElementCopyClick.bind(this,inputElement,tempContextMenu))):copyInputIconContainer.classList.add("disabled"),inputElement.append(copyInputIconContainer);const svgInputHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgInputHistoryElement.classList.add("key-svg-element"),svgInputHistoryElement.setAttribute("width","22"),svgInputHistoryElement.setAttribute("height","22");const pathCopyHistoryElement=document.createElementNS("http://www.w3.org/2000/svg","path");pathCopyHistoryElement.classList.add("key-svg-path-element"),pathCopyHistoryElement.setAttribute("d","M 3 8 L 3 17 C 3 18 4 19 5 19 L 14 19 C 15 19 16 18 16 17 L 16 8 C 16 7 15 6 14 6 L 5 6 C 4 6 3 7 3 8 M 6 6 L 6 5 C 6 4 7 3 8 3 L 17 3 C 18 3 19 4 19 5 L 19 14 C 19 15 18 16 17 16 L 16 16"),svgInputHistoryElement.appendChild(pathCopyHistoryElement);const copyInputIconText=document.createElement("span");if(copyInputIconText.classList.add("svg-context-menu-span"),this.__addLocalizedElement(copyInputIconText,"CopyResult"),copyInputIconContainer.append(svgInputHistoryElement,copyInputIconText),tempContextMenu.appendChild(copyInputIconContainer),environment.isTcEmbeddedBrowser)return;const pasteInputIconContainer=document.createElement("div");pasteInputIconContainer.classList.add("svg-icon-container","svg-history-copy-icon-container"),window.isSecureContext?this.__destroyOnDetach.push(TcHmi.EventProvider.registerDomEvent(pasteInputIconContainer,"click",this.__onInputElementPasteClick.bind(this,inputElement,tempContextMenu))):pasteInputIconContainer.classList.add("disabled"),inputElement.append(pasteInputIconContainer);const svgPasteInputElement=document.createElementNS("http://www.w3.org/2000/svg","svg");svgPasteInputElement.classList.add("key-svg-element"),svgPasteInputElement.setAttribute("width","22"),svgPasteInputElement.setAttribute("height","22");const pathPasteInputElement=document.createElementNS("http://www.w3.org/2000/svg","path");pathPasteInputElement.classList.add("key-svg-path-element"),pathPasteInputElement.setAttribute("d","M 7 5 L 5 5 Q 3 5 3 7 L 3 19 Q 3 21 5 21 L 16 21 Q 18 21 18 19 L 18 7 Q 18 5 16 5 L 14 5 M 9 7 Q 7 7 7 5 Q 7 3 9 3 L 12 3 Q 14 3 14 5 Q 14 7 12 7 L 9 7 M 15 10 L 6 10 M 15 14 L 6 14 M 6 18 L 15 18"),svgPasteInputElement.appendChild(pathPasteInputElement);const pasteInputIconText=document.createElement("span");pasteInputIconText.classList.add("svg-context-menu-span"),this.__addLocalizedElement(pasteInputIconText,"PasteClipboard"),pasteInputIconContainer.append(svgPasteInputElement,pasteInputIconText),tempContextMenu.appendChild(pasteInputIconContainer)}__onHistoryElementClick(event){const historyElement=event.currentTarget,termElement=historyElement.querySelector(".history-span-element-term"),resultElement=historyElement.querySelector(".history-span-element-result");if(!termElement||!resultElement)return;const resultText=resultElement.innerHTML.split("=")[1]?.trimStart()??"";this.__elementDisplayResultTermInput.value=resultText||"",this.__elementDisplayTermSpan.style.fontSize="17px",this.__elementDisplayTermSpan.textContent=this.__parseTermToDisplay(termElement.textContent||""),this.__setResult(TcHmi.ValueConverter.toNumber(resultText)),this.__repairDisplayTermBuffer()}__onHistoryElementContextmenu(event){const historyElement=event.currentTarget,contextMenus=this.__elementHistoryScrollContainer.querySelectorAll("beckhoff-tchmi-context-menu-calculator");for(const contextMenu of contextMenus)contextMenu!==historyElement&&contextMenu.toggleMenuOff()}__onPointerDown(event){event.target!==this.__elementDisplayResultTermInput&&this.__elementDisplayResultTermInput.setSelectionRange(0,0)}__repairDisplayTermBuffer(){this.__displayTermBuffer=[];const value=this.__elementDisplayResultTermInput.value||"";for(let i=0;i<value.length;i++){const currentChar=value[i];if(" "!==currentChar)if("×"===currentChar)this.__displayTermBuffer.push(" × ");else if("÷"===currentChar)this.__displayTermBuffer.push(" ÷ ");else if("-"===currentChar){const nextChar=value[i+1];void 0!==nextChar&&/^[0-9]$/.test(nextChar)?(this.__displayTermBuffer.push("-"+nextChar),i++):this.__displayTermBuffer.push(" - ")}else"+"===currentChar?this.__displayTermBuffer.push(" + "):this.__displayTermBuffer.push(currentChar)}this.__mergeMathFunctionsInBuffer()}__onHistoryElementCopyClick(historyElement,contextMenu){const spanElement=historyElement.querySelector(".history-span-element-result");if(!spanElement)return;let textToCopy=spanElement.textContent||"";""!==textToCopy&&(textToCopy=textToCopy.split("=")[1]?.trimStart()??"",navigator.clipboard.writeText(textToCopy),contextMenu.toggleMenuOff())}__onInputElementCopyClick(inputElement,contextMenu){inputElement&&""!==inputElement.value&&(window.isSecureContext&&navigator.clipboard?(navigator.clipboard.writeText(inputElement.value).catch(err=>{TcHmi.Log.Controls.error(this,TcHmiCalculator.#tchmiFQN,`Failed to write to clipboard: ${err?.toString()}`)}),contextMenu.toggleMenuOff()):TcHmi.Log.Controls.warn(this,TcHmiCalculator.#tchmiFQN,"Clipboard API unavailable in this context."))}__onHistoryElementDeleteClick(historyElement,contextMenu){historyElement.style.height="0px",historyElement.style.padding="0px",setTimeout(()=>{this.__deleteHistoryAndEvents(historyElement)},500),contextMenu.toggleMenuOff()}__onInputElementPasteClick(inputElement,contextMenu){navigator.clipboard.readText().then(text=>{inputElement.value=text}).catch(err=>{TcHmi.Log.Controls.error(this,TcHmiCalculator.#tchmiFQN,`Failed to read from clipboard: ${err?.toString()}`)}),contextMenu.toggleMenuOff()}__deleteHistoryAndEvents(elements){if(Array.isArray(elements)){for(const element of elements)for(const historyElement of this.__historyElements)if(historyElement===element){historyElement.remove(),this.__historyElements=this.__historyElements.filter(el=>el!==historyElement);break}}else for(const historyElement of this.__historyElements)if(historyElement===elements){historyElement.remove(),this.__historyElements=this.__historyElements.filter(el=>el!==historyElement);break}this.__historyCache=[];for(const historyElement of this.__historyElements){const term=historyElement.querySelector(".history-span-element-term"),result=historyElement.querySelector(".history-span-element-result");term&&result&&this.__historyCache.push({term:term.textContent||"",result:result.textContent?.slice(2)||""})}localStorage.setItem(this.__id+"_history",JSON.stringify(this.__historyCache))}__extractLastNumberFromBuffer(){const buffer=this.__displayTermBuffer.join("");let i=buffer.length-1,stack=[],lastValidExpression="",tempExpression="";for(;i>=0;){const char=buffer[i];if(tempExpression=char+tempExpression,")"===char)stack.push(")");else if("("===char){if(0===stack.length)break;if(stack.pop(),0===stack.length){let j=i-1,funcName="";for(;j>=0&&/[a-zA-Z]/.test(buffer[j]);)funcName=buffer[j]+funcName,j--;funcName&&(tempExpression=funcName+tempExpression,i=j+1),lastValidExpression=tempExpression}}else if(0===stack.length&&/[+\-×÷]/.test(char))break;i--}if(lastValidExpression)return lastValidExpression.trim();const match=buffer.match(/([0-9.πe]+)\s*$/);return match?match[1]:""}__writeBufferToDisplayTermInput(){this.__elementDisplayResultTermInput.value="";for(const elem of this.__displayTermBuffer)this.__elementDisplayResultTermInput.value+=elem}__parseTermToCalc(term){let result=term.replace(/\s+/g," ").replace(/×/g,"*").replace(/÷/g,"/").replace(/π/g,"PI").replace(/\s*EXP\s*/i,"e").trim();return result=this.__replaceMathExpressions(result),result}__replaceMathExpressions(expr){let result="",i=0;for(;i<expr.length;)if(expr.startsWith("log(",i)||expr.startsWith("ln(",i)||"√"===expr[i]){let funcName="",replacement="";if(expr.startsWith("log(",i))funcName="log(",replacement="log(",i+=4;else if(expr.startsWith("ln(",i))funcName="ln(",replacement="log(",i+=3;else if("√"===expr[i]){if("("!==expr[i+1]){result+=expr[i],i++;continue}funcName="√(",replacement="sqrt(",i+=2}result+=replacement;let start=i,openParens=1;for(;i<expr.length&&openParens>0;)"("===expr[i]?openParens++:")"===expr[i]&&openParens--,i++;const inner=expr.slice(start,i-1),replacedInner=this.__replaceMathExpressions(inner);"log("===funcName?result+=replacedInner+", 10)":"ln("===funcName?result+=replacedInner+", e)":"√("===funcName&&(result+=replacedInner+")")}else result+=expr[i],i++;return result}__parseTermToDisplay(term){return term.replace(/\s+/g," ").replace(/\*/g,"×").replace(/\//g,"÷").trim()}__calculateTerm(term){let countOpenBrackets=0,countCloseBrackets=0;for(const char of term)"("===char?countOpenBrackets++:")"===char&&countCloseBrackets++;if(countOpenBrackets!==countCloseBrackets)return{value:0,error:"Unbalanced brackets in the term."};let parsedTerm=this.__parseTermToCalc(term);this.__isDeg&&(parsedTerm=this.__insertDeg(parsedTerm));let result={value:0,error:void 0};try{result.value=window.math.evaluate(parsedTerm)}catch(e){result.error=e.message}return result}async __openLayoutFile(layoutFile){const path=`./Layouts/${layoutFile}.js`,{layout}=await import(path);if(!layout)throw new Error(`Failed to load layout file: ${layoutFile}`);return layout}__getLastMathOperation(term){if(!term)return"";const s=term.trim();if(!s)return"";const isNumChar=c=>/\d|\./.test(c);for(let i=s.length-1;i>=0;i--){const ch=s[i];if(!"+-×*/÷".includes(ch))continue;let j=i-1;for(;j>=0&&" "===s[j];)j--;const prev=j>=0?s[j]:"";if("+"===ch||"-"===ch){if(prev&&(isNumChar(prev)||")"===prev))return s.slice(i).trim()}else if(prev&&(isNumChar(prev)||")"===prev))return s.slice(i).trim()}return""}__mergeMathFunctionsInBuffer(){const tmpBuffer=[],buffer=this.__displayTermBuffer;let i=0;const functions=["asin(","acos(","atan(","sin(","cos(","tan(","ln(","log(","nthRoot(","^(","^2","mod","EXP"];for(;i<buffer.length;){const current=buffer[i];if(current.length>1){tmpBuffer.push(current),i++;continue}let matched=!1;for(const func of functions){const chars=func.split(""),slice=buffer.slice(i,i+chars.length);if(slice.length===chars.length&&slice.every(c=>1===c.length)&&slice.join("")===func){if("nthRoot("===func){let expression=func;for(i+=chars.length;i<buffer.length&&","!==buffer[i];)expression+=buffer[i],i++;i<buffer.length&&","===buffer[i]&&(expression+=",",i++),tmpBuffer.push(expression+" ")}else tmpBuffer.push(func),i+=chars.length;matched=!0;break}}matched||(tmpBuffer.push(current),i++)}this.__displayTermBuffer=tmpBuffer;for(let i=0;i<this.__displayTermBuffer.length;i++)"mod"!==this.__displayTermBuffer[i]&&"EXP"!==this.__displayTermBuffer[i]||(this.__displayTermBuffer[i]=" "+this.__displayTermBuffer[i]+" ")}__insertDeg(expr){const trigFunctions=["sin","cos","tan","asin","acos","atan"];let i=0,output="";for(;i<expr.length;){const func=trigFunctions.find(fn=>expr.startsWith(fn+"(",i));if(func){if(output+=func,i+=func.length,"("===expr[i]){let depth=0,arg="";for(i++,depth++;i<expr.length&&depth>0;){if("("===expr[i])depth++;else if(")"===expr[i]&&(depth--,0===depth))break;arg+=expr[i],i++}output+=`((${this.__insertDeg(arg)}) deg)`,i++}}else output+=expr[i],i++}return output}setLayout(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew)??this.getAttributeDefaultValueInternal("Layout");convertedValue!==this.__layout&&(this.__layout=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Layout"}),this.__processLayout())}getLayout(){return this.__layout}__processLayout(){this.__isAttached&&("Scientific"===this.__layout?(this.__elementScientificIcon.classList.add("active"),this.__openLayoutFile("Scientific").then(layout=>{this.__openLayoutFileAsync(layout)}).catch(reason=>{TcHmi.Log.Controls.error(this,"LayoutFile","LayoutFile loading failed",reason)}),this.setLayout("Scientific")):(this.__elementScientificIcon.classList.remove("active"),this.__openLayoutFile("Standard").then(layout=>{this.__openLayoutFileAsync(layout)}).catch(reason=>{TcHmi.Log.Controls.error(this,"LayoutFile","LayoutFile loading failed",reason)}),this.setLayout("Standard")))}}})();TcHmi.Controls.registerEx("TcHmiCalculator","TcHmi.Controls.Beckhoff",TcHmiCalculator,{injectInGlobalObject:!0});export{TcHmiCalculator as Control};