import{splashScreen}from"./SplashScreen.js";import{Init}from"./System.js";export class AutomationCommandManager{constructor(){window.parent&&window.parent!==window&&window.addEventListener("message",event=>{const eventData=event.data;if(event.source===window.parent&&eventData.messageType)return"System.setSingleControlMode"===eventData.messageType?(TCHMI_SINGLECONTROL=!0,this.postMessageToParent({messageType:"Ack:System.setSingleControlMode"}),TCHMI_DESIGNER=!1,TCHMI_ENGINEERING=!1,TCHMI_LIVEVIEW=!1,void splashScreen.hide()):"System.hideSplashScreen"===eventData.messageType?(splashScreen.disableSplash(),void this.postMessageToParent({messageType:"Ack:System.hideSplashScreen"})):"Theme.set"===eventData.messageType?(Init.initializedThemes.then(()=>{TcHmi.Theme.set(eventData.themename)}),void this.postMessageToParent({messageType:"Ack:Theme.set"})):"Locale.set"===eventData.messageType?(Init.initializedServerCommunication.then(()=>{TcHmi.Locale.load(eventData.locale)}),void this.postMessageToParent({messageType:"Ack:Locale.set"})):void("System.generateControl"===eventData.messageType&&Init.initialized.then(()=>{const control=TcHmi.ControlFactory.createEx(eventData.controlType,eventData.controlId,eventData.controlAttributes,null);if(!control)return;const controlElem=control.getElement()[0];document.body.replaceChildren(controlElem),this.postMessageToParent({messageType:"Ack:System.generateControl"})}))})}postMessageToParent(message){window.parent&&window.parent!==window&&window.parent.postMessage(message,"*")}}export const automationCommandManager=new AutomationCommandManager;