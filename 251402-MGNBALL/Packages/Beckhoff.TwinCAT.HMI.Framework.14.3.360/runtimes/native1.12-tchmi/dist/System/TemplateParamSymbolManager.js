import{getSchema}from"../API/Type.js";import{Symbol as SystemSymbol}from"./Symbol.js";import{resolveDefault}from"./Type.Schema.js";export class TemplateParamSymbolManager extends TcHmi.Destroyable{constructor(){super()}__entries=new Map;add(name,type,value){let prepValue;if(void 0===value){let schema=getSchema(type);schema&&(prepValue=resolveDefault(schema))}else prepValue=value;let entry={name,type,value:prepValue,callbacks:[]};this.__entries.set(name,entry)}remove(name){let entry=this.__entries.get(name);entry&&(entry.value instanceof SystemSymbol&&entry.value.destroy(),entry.value=null,this.__entries.delete(name))}get(name){return this.__entries.get(name)}destroy(){this.isDestroyed()||(this.__releaseDestroyPrivilege(),this.isDestroyable()&&(this.__entries.forEach(entry=>{entry.value instanceof SystemSymbol&&entry.value.destroy()}),this.__entries.clear()))}keepAlive(name){let entry=this.__entries.get(name);return!!(entry&&entry.callbacks.length>0)}}export const templateParamSymbolManager=new TemplateParamSymbolManager;