let __current,__inc=0,__queue=[];function __next(){if(__current)return;let c=__queue.shift();c&&(__current=c,__current.prompt.prompt().then(result=>{__current&&(__current?.resolve(result),__current.prompt.destroy(),__current=null),__next()}).catch(reason=>{__current&&(__current?.reject(reason),__current.prompt.destroy(),__current=null),__next()}))}export function add(symbol,options,parentControl){let id=(__inc++,__inc);return{id,promise:new Promise((resolve,reject)=>{let popupUiProvider;try{popupUiProvider=TcHmi.UiProvider.getPreferredProvider("popup")}catch(e){return void reject(new Error("Resolving UiProvider 'popup' for TcHmiInteractiveWritePrompt has failed with unexpected exception: '"+e+"'."))}if(!popupUiProvider)return void reject(new Error("Resolving UiProvider 'popup' for TcHmiInteractiveWritePrompt has failed."));if(!popupUiProvider.createInteractiveWritePrompt)return void reject(new Error("The configured popup provider does not implement the method 'createInteractiveWritePrompt'."));let prompt=popupUiProvider.createInteractiveWritePrompt(symbol,options,parentControl);prompt.setBackgroundAction({close:!0,action:"cancel"});let entry={id,prompt,resolve,reject};__queue.push(entry),__next()})}}export function remove(id){if(__current?.id===id)__current.prompt.abort({action:"cancel"}),__current.prompt.destroy(),__current=null;else{let pos=-1;for(let i=0;i<__queue.length;i++){let entry=__queue[i];if(entry.id===id){pos=i,entry.prompt.abort({action:"cancel"}),entry.prompt.destroy();break}}-1!==pos&&__queue.splice(pos,1)}}