import*as Keyboard from"./Keyboard.js";import{config}from"../System/System.js";let registeredUiProvider={providers:{keyboard:new Map,popup:new Map}};export function register(provider){const typeMap=registeredUiProvider.providers[provider.type];if(typeMap.has(provider.providerName))throw new Error(`Provider ${provider.providerName} is already registered as a ${provider.type} provider. Duplicate registrations are not allowed.`);typeMap.set(provider.providerName,provider)}export function getProviders(type){return registeredUiProvider.providers[type]}export function getProvider(type,providerName){return getProviders(type).get(providerName)}export function getPreferredProvider(type){let name;switch(type){case"keyboard":name=Keyboard.getProviderName();break;case"popup":name=config.systemPopups?.providerName;break;default:throw new Error(`The provider type '${type}' is unknown. Please make sure this switch-case covers all possible values of the parameter 'type'.`)}if(!name)return;const preferredProvider=getProvider(type,name);if(!preferredProvider)throw new Error(`The configured provider '${name}' is not registered for type '${type}'. Please make sure that the provider that is configured in tchmiconfig.json is registered with TcHmi.UiProvider.register().`);return preferredProvider}export class BaseProvider{providerName;constructor(providerName,type){if("string"!=typeof providerName)throw new SyntaxError("providerName parameter has invalid type");if("string"!=typeof type)throw new SyntaxError("type parameter has invalid type");this.providerName=providerName}}TcHmi.UiProvider??={};TcHmi.UiProvider.register=register;TcHmi.UiProvider.getProviders=getProviders;TcHmi.UiProvider.getProvider=getProvider;TcHmi.UiProvider.getPreferredProvider=getPreferredProvider;TcHmi.UiProvider.BaseProvider=BaseProvider;